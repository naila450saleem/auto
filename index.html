<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Auto Transport Calculator</title>
    <style>
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: Arial, sans-serif;
}

body {
    background-color: #f5f5f5;
    padding: 20px;
}

.calculator {
    background-color: #fff;
    border-radius: 8px;
    padding: 30px;
   
    max-width: 600px;
    margin: 0 auto;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    margin-top: 10px;
}

/* Tabs Section */
.location-form__tabs {
  display: flex;
  justify-content: center;
  background: #d1d4e6;
  border-radius: 20px;
  /* overflow: hidden; */
  gap: 0;
  margin-bottom: 25px;
}

.location-form__tabs--link {
  flex: 1;
  text-align: center;
  text-decoration: none;
  cursor: pointer;
  transition: all 0.3s ease;
}

.form-tab {
  padding: 8px 0;
  font-family: "Poppins", sans-serif;
  font-weight: 600;
  font-size: 14px;
  color: #5a607f; /* default grey text */
  background-color: #d1d4e6; /* default light grey */
  transition: all 0.3s ease;
}

.location-form__tabs--link.active .form-tab {
  background-color: #581eff; /* blue */
  color: #ffffff; /* white text */
}

.location-form__tabs--link:not(.active) .form-tab:hover {
  background-color: #d9deef; /* light hover */
}


.form-tab p {
    font-weight: 400;
    color: white;
    margin: 0;
    text-decoration: none !important;
    font-size: 14px;
}

a.location-form__tabs--link {
    text-decoration: none !important;
}

/* üîπ Active tab (blue background + white text) */
.location-form__tabs--link.active .form-tab {
  background-color: #581eff;
  color: #ffffff;
}

/* üîπ Route tab ‚Äî rounded on BOTH sides */
.location-form__tabs--link:first-child .form-tab {
  border-radius: 10px; /* üëà both left & right corners */
}

/* üîπ Contact tab ‚Äî square edges */
.location-form__tabs--link:last-child .form-tab {
  border-radius: 10px;
}

/* üîπ Optional hover effect */
.location-form__tabs--link:not(.active) .form-tab:hover {
  background-color: #d9deef;
}


/* Tab icons styling */
.form-tab img {
    width: 22px;
    height: 22px;
    object-fit: contain;
}

/* Remove underline from all tab links */
a.location-form__tabs--link {
    text-decoration: none !important;
}

/* Titles and Section Headings */
.title-text {
    font-size: 24px;
    font-weight: bold;
    margin-bottom: 4px;
    color: #581eff;
}

.subtitle-text {
  font-family: "Poppins", sans-serif;
  font-size: 16px;
  font-weight: 500;
  color: #555e8c;         /* soft gray-blue */
  text-align: left;     /* match title alignment */
  margin-top: 5px;
  margin-bottom: 25px;
  letter-spacing: 0.3px;
}


.group-icon {
    display: flex;
    align-items: center;
    margin-bottom: 15px;
    color: #581eff;
    font-weight: bold;
}

.group-icon svg {
    margin-right: 10px;
}

/* Form Elements */
.form-wrapper {
    margin-bottom: 20px;
}

.form-group {
    margin-bottom: 15px;
    position: relative;
}

.route-control {
  width: 100%;
  padding: 12px;
  border: 1px solid #ccc; /* Normal state ‚Äî thin border */
  border-radius: 12px;
  outline: none;
  font-size: 15px;
  transition: all 0.3s ease;
  background-color: #fff; /* white background */
}

/* When user clicks inside (focus) */
.route-control:focus {
  border: 2.5px solid #6e5bff; /* Thicker border on focus */
  box-shadow: 0 0 6px rgba(110, 91, 255, 0.25);
}




.text-add-car {
    color: #581eff;
    font-weight: bold;
    text-decoration: none;
    display: block;
    margin: 15px 0;
}

.form-group label {
  display: block;
  font-weight: 400;
  color: #000;
  margin-bottom: 10px; /* space between label & input */
  font-size: 14px;
}


/* Dealer Section */
.dealer-wrapper {
    display: flex;
    align-items: center;
    margin: 20px 0;
}

.is-dealer {
    margin-right: 10px;
}

/* Continue Button */
/* Green area background */
.continue-buttons {
  display: flex;
  justify-content: center;
  align-items: center;
  background: linear-gradient(135deg, #667eea 0%, #8a5fba 100%);
  padding: 2px 0;
  border-radius: 6px;
  transition: all 0.3s ease;
}


.btn {
  background: transparent;
  border: none;
  color: #fff;
  padding: 8px 30px;
  width: 50%;
  cursor: pointer;
  text-align: center;
  font-size: 16px;
}

.btn + .btn {
  border-left: 2px solid #a1ea6d;
}

.hidden {
  display: none !important;
}

.continue-buttons.show-dealer {
  justify-content: space-between;
}


.continue-buttons.show-dealer .btn {
  width: 100%;
}

/* --- Mobile: only break text in 2nd button --- */
@media (max-width: 768px) {
  .mobile-break {
    display: inline;
  }

  .continue-buttons .btn {
    font-size: 14px;
    padding: 10px 14px;
  }
    /* Increase line-height only for the second button */
  #dealer-btn {
    line-height: 1.6; /* adjust spacing between lines */
  }

}

/* Hide <br> on desktop */
@media (min-width: 769px) {
  .mobile-break {
    display: none;
  }
}

.next-step-buttons {
    text-align: center; /* buttons center me */
    margin-top: 20px;
}

.btn-primary {
    background-color: #b6f87c; /* blue color */
    color: #000;
    border: none;
    padding: 14px 30px;
    font-size: 1rem;
    border-radius: 8px;
    cursor: pointer;
    transition: background-color 0.3s ease;
    width: 100%;
    font-weight: bold;
}

.btn-primary:hover {
    background-color: #87c155;
}



/* Dropdown Styles */
.dropdown {
    position: relative;
    background-color: #fff;
    width: 100%;
}

.dropdown-toggle {
    display: flex;
    align-items: center;
    justify-content: space-between;
    width: 100%;
    background-color: #fff;
    border: 1px solid #ddd;
    border-radius: 6px;
    padding: 0px 10px; 
    cursor: pointer;
    position: relative;
    transition: border-color 0.3s ease, box-shadow 0.3s ease;
}

.dropdown-toggle input {
    border: none;
    outline: none;
    background: transparent;
    width: 100%;
    font-size: 16px;
    color: #333;
    pointer-events: none;
}

.dropdown-toggle::after {
    content: "‚ñ≤";
    font-size: 12px;
    color: #666;
    position: absolute;
    right: 15px;
    top: 50%;
    transform: translateY(-50%);
    pointer-events: none;
    transition: transform 0.3s ease;
}

.dropdown.open .dropdown-toggle::after {
    transform: translateY(-50%) rotate(180deg);
}

.dropdown-toggle:focus-within {
    border-color: #581eff;
    box-shadow: 0 0 5px rgba(0, 102, 204, 0.3);
}

.dropdown-menu {
    position: absolute;
    top: calc(100% + 5px);
    left: 0;
    right: 0;
    background: #fff;
    border: 1px solid #ddd;
    border-radius: 6px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    z-index: 1000;
    max-height: 300px;
    overflow-y: auto;
    display: none;
}

.dropdown.open .dropdown-menu {
    display: block;
}

.dropdown-item {
    padding: 10px 15px;
    cursor: pointer;
    display: flex;
    align-items: center;
    background-color: #fff;
    transition: background 0.2s ease;
    border: none;
    width: 100%;
    text-align: left;
    font-size: 14px;
    margin: 1px 0; /* Top-bottom 1px space */
}

/* Hover effect with rounded corners and 1px space */
.dropdown-item:hover {
    background: linear-gradient(135deg, hsl(217 91% 60%) 0%, hsl(280 85% 65%) 100%);
    color: white;
    border-radius: 4px;
    margin: 1px 8px; /* Left-right 1px space */
    width: calc(100% - 16px); /* Adjust width for spacing */
}

/* Selected/Active option with rounded corners and space */
.dropdown-item.selected {
    background: linear-gradient(135deg, hsl(217 91% 60%) 0%, hsl(280 85% 65%) 100%);
    color: white;
    border-radius: 4px;
    margin: 1px 8px; /* Left-right 1px space */
    width: calc(100% - 16px); /* Adjust width for spacing */
}

/* Focus state */
.dropdown-item:focus {
    outline: none;
    background: linear-gradient(135deg, hsl(217 91% 60%) 0%, hsl(280 85% 65%) 100%);
    color: white;
    border-radius: 4px;
    margin: 1px 8px;
    width: calc(100% - 16px);
}

/* Remove border between items */
.dropdown-item:not(:last-child) {
    border-bottom: none;
}

/* First and last item radius adjustment */
.dropdown-item:first-child:hover,
.dropdown-item:first-child.selected,
.dropdown-item:first-child:focus {
    margin-top: 4px;
}

.dropdown-item:last-child:hover,
.dropdown-item:last-child.selected,
.dropdown-item:last-child:focus {
    margin-bottom: 4px;
}

/* Scrollbar styling */
.dropdown-menu::-webkit-scrollbar {
    width: 6px;
}

.dropdown-menu::-webkit-scrollbar-track {
    background: #f1f1f1;
    border-radius: 3px;
}

.dropdown-menu::-webkit-scrollbar-thumb {
    background: #c1c1c1;
    border-radius: 3px;
}

.dropdown-menu::-webkit-scrollbar-thumb:hover {
    background: #a8a8a8;
}

.dropdown-item svg {
    margin-right: 10px;
    width: 20px;
    height: 20px;
}

/* Cars grid */
.cars-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 10px;
  padding: 10px;
}

.car-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  cursor: pointer;
  padding: 8px;
  background: #fff;
  transition: 0.2s;
  border: 1px solid transparent;
  border-radius: 8px;
}

.car-item:hover {
  border-color: #0066cc;
  box-shadow: 0 0 5px rgba(0,102,204,0.3);
}

.car-item img {
  width: 70px;
  height: auto;
  margin-bottom: 5px;
}

.plus-box {
  display: flex;
  align-items: center;
  justify-content: center;
  background: #e6f0ff;
  border: 1px solid #0066cc;
  border-radius: 8px;
  font-size: 30px;
  color: #0066cc;
  cursor: pointer;
}

.hidden-cars {
  display: none;
}

.header {
    padding: 10px 15px;
    background-color: #f9f9f9;
    font-weight: bold;
    border-bottom: 1px solid #eee;
}

/* Location suggestions styling */
.list-group {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    background: white;
    border: 1px solid #ddd;
    border-top: none;
    border-radius: 0 0 6px 6px;
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    z-index: 1000;
    max-height: 200px;
    overflow-y: auto;
    display: none;
}

.list-group .item {
    padding: 10px 15px;
    cursor: pointer;
    border-bottom: 1px solid #f0f0f0;
}

.list-group .item:hover {
    background-color: #f5f5f5;
}

.list-group .item:last-child {
    border-bottom: none;
}

.list-group .item strong {
    color: #0066cc;
}

.list-group .item small {
    color: #666;
    font-size: 12px;
}

/* Loading indicator */
.loading {
    padding: 10px 15px;
    color: #666;
    font-style: italic;
    text-align: center;
}

/* Success message */
.success-message {
    background-color: #e6f7e9;
    border: 1px solid #4caf50;
    border-radius: 4px;
    padding: 10px;
    margin-top: 15px;
    text-align: center;
    color: #2e7d32;
    display: none;
}

/* Confirmation Page Styles */
.confirmation-header {
    text-align: center;
}

.confirmation-header h1 {
    font-size: 2.5rem; /* large heading */
    font-weight: 700;  /* bold */
    color: #1f2937;    /* dark gray */
    margin-bottom: 10px;
    line-height: 1.2;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    margin-bottom: 20px; 
}

.confirmation-header h2 {
    font-size: 1.5rem; /* slightly smaller */
    font-weight: 500;
    color: #4b5563;    /* medium gray */
    margin-top: 0;
    line-height: 1.4;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}

.confirmation-container {
  display: flex;
  gap: 30px;
  align-items: flex-start;
  margin-top: 5%;
  margin-left: 5%;
}

.confirmation-left {
  flex: 1;
}

.confirmation-right {
  flex: 0 0 300px;
  background: #f7f8fc;
  padding: 20px;
  border-radius: 10px;
  box-shadow: 0 3px 10px rgba(0,0,0,0.05);
  font-family: 'Poppins', sans-serif;
}

.summary-box h3 {
  color: #09265e;
  margin-bottom: 20px;
  font-size: 18px;
  font-weight: 700;
  border-bottom: 1px solid #e5e8f0;
  padding-bottom: 10px;
}

.summary-section {
  margin-bottom: 15px;
}

.summary-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 8px;
}

.summary-icon {
  font-size: 18px;
  margin-right: 5px;
}

.summary-title {
  font-weight: 600;
  color: #09265e;
  font-size: 16px;
  flex-grow: 1;
}

.edit-btn {
  background: #eef1f8;
  border: none;
  border-radius: 6px;
  padding: 4px 10px;
  font-size: 13px;
  color: #09265e;
  cursor: pointer;
  transition: background 0.2s;
}

.edit-btn:hover {
  background: #dfe4f0;
}

.summary-body {
  padding-left: 24px;
  color: #333;
  font-size: 15px;
  line-height: 1.5;
}

hr {
  border: none;
  border-top: 1px solid #eaeaea;
  margin: 12px 0;
}


.checkbox-group {
  display: flex;
  flex-direction: column;
  gap: 15px;
  margin-top: 20px;
}

.checkbox-item {
  display: flex;
  align-items: flex-start;
  gap: 10px;
}

.checkbox-item input {
  margin-top: 4px;
}

.checkbox-item span {
  font-size: 14px;
  color: #444;
  line-height: 1.5;
}

.checkbox-item a {
  color: #09265e;
  text-decoration: underline;
}

.terms-note {
  margin-top: 20px;
  font-size: 13px;
  color: #555;
}

.terms-note a {
  color: #09265e;
  text-decoration: underline;
}

#confirmation-page {
  display: none;
}

/* Responsive Styles */
@media (max-width: 1024px) {
    .confirmation-container {
        flex-direction: column;
        margin-left: 3%;
        margin-right: 3%;
        gap: 20px;
    }

    .confirmation-left,
    .confirmation-right {
        flex: 1 1 100%;
    }

    .confirmation-right {
        padding: 15px;
    }

    .summary-box h3 {
        font-size: 18px;
    }

    .summary-item {
        font-size: 14px;
    }
}

@media (max-width: 768px) {
    .confirmation-header h1 {
        font-size: 2rem;
        margin-bottom: 15px;
    }

    .confirmation-header h2 {
        font-size: 1.25rem;
    }

    .confirmation-container {
        margin-top: 3%;
        gap: 15px;
    }

      .confirmation-right {
    justify-content: center; /* mobile pe center align karega */
    padding-right: 0;
  }

  .summary-box {
    max-width: 100%;
  }
}

@media (max-width: 480px) {
    .confirmation-header h1 {
        font-size: 1.75rem;
    }

    .confirmation-header h2 {
        font-size: 1.1rem;
    }

    .confirmation-right {
        padding: 10px;
        flex: 1 1 100%;
    }

    .summary-box h3 {
        font-size: 16px;
        padding-right: 40px;
    }

    .summary-item {
        font-size: 13px;
    }

    .checkbox-group {
        gap: 10px;
    }

    .terms-note {
        font-size: 12px;
    }
}

.form-row {
    display: flex;
    gap: 15px;
    margin-bottom: 20px;
}

.form-field {
    flex: 1;
}

.form-field label {
    display: block;
    margin-bottom: 8px;
    font-weight: 600;
    color: #333;
}

/* üîπ Common styling for inputs and selects in form-field */
.form-field input,
.form-field select {
  background-color: #f9f9ff; /* light blueish/white background */
    color: #333;
    border: 1px solid #ccc;
    border-radius: 8px;
    padding: 12px;
    font-size: 15px;
    width: 100%;
    outline: none;
    transition: all 0.3s ease;
}

/* üîπ Focus state */
.form-field input:focus,
.form-field select:focus {
border: 2.5px solid #6e5bff;
    box-shadow: 0 0 6px rgba(110, 91, 255, 0.25);
    background-color: #fff; /* optional: highlight bg on focus */
}

/* üîπ Optional: Label spacing */
.form-field label {
  display: block;
  margin-bottom: 6px;
  font-weight: 600;
  color: #333;
  font-size: 14px;
}


 .radio-group {
            display: inline-flex;
            margin-top: 5px;
            gap: 20px;
            background-color: #fff;
            width: 100%;
            padding: 10px 0;
        }

        .radio-option {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
        }

        .radio-option input {
            display: none;
        }

        /* Custom radio dot */
       /* Outer circle */
.radio-dot {
    width: 15px;   /* outer circle size */
    height: 15px;
    border: 2px solid #581eff;
    border-radius: 50%;
    position: relative;
    display: inline-block;
    transition: all 0.3s ease;
}

/* Inner dot when checked ‚Äî SMALLER */
.radio-option input:checked + .radio-dot::after {
    content: '';
    width: 6px;    /* previously 8px, now smaller */
    height: 6px;   /* previously 8px, now smaller */
    background-color: #581eff;
    border-radius: 50%;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
}


        .radio-label {
            color: #333;
            font-weight: normal;
            transition: all 0.3s ease;
        }

        .radio-option input:checked ~ .radio-label {
            color: #000;
            
        }

        .radio-option:hover .radio-dot {
            border-color: #581eff;
        }

        .radio-option:hover .radio-label {
            color: #000;
        }

        /* Make entire radio option clickable */
        .radio-option {
            cursor: pointer;
        }

.promise-box {
    background-color: #f8f9fa;
    border-left: 4px solid #0066cc;
    padding: 15px;
    margin: 20px 0;
    border-radius: 4px;
}

.promise-box h3 {
    color: #09265e;
    margin-bottom: 10px;
}

/* Responsive: stack buttons on small screens */
@media (max-width: 600px) {
    .radio-group {
        flex-direction: column;
    }
    .radio-option:not(:last-child) label {
        border-right: none;
        border-bottom: 1px solid #ddd;
    }
}

.optional-section {
    margin-top: 20px;
    padding-top: 20px;
    border-top: 1px dashed #ddd;
}

.optional-section h3 {
    color: #666;
    font-size: 16px;
    margin-bottom: 10px;
    display: flex;
    align-items: center;
    gap: 8px;
}

.optional-section h3:before {
    content: "+";
    background: #bdc3c7;
    color: white;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 14px;
}

.back-btn {
    background-color: #6c757d;
    margin-top: 10px;
}

.back-btn:hover {
    background-color: #5a6268;
}

.zip-code {
    font-size: 12px;
    color: #666;
    margin-left: 5px;
}

/* --- Popup Background --- */
  /* --- Popup Styling --- */
        .popup-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .popup-box {
            background: #fff;
            padding: 30px;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            max-width: 400px;
            width: 90%;
            animation: fadeIn 0.3s ease;
            position: relative;
        }

        .popup-box h3 {
            margin-bottom: 15px;
            color: #2c3e50;
            font-size: 24px;
        }
        
        .popup-box p {
            margin-bottom: 20px;
            font-size: 16px;
            color: #555;
        }

        .phone-number {
            font-size: 28px;
            font-weight: 700;
            color: #3498db;
            margin: 15px 0;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 8px;
            display: inline-block;
        }

        .close-popup {
            background: #3498db;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            color: #fff;
            cursor: pointer;
            margin-top: 10px;
            font-weight: 600;
            transition: all 0.3s ease;
            width: 100%;
        }

        .close-popup:hover {
            background: #2980b9;
        }
        
        .popup-icon {
            font-size: 50px;
            color: #3498db;
            margin-bottom: 15px;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: scale(0.8);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }
        
        /* Responsive adjustments */
        @media (max-width: 600px) {
            .container {
                padding: 20px 15px;
            }
            
            .popup-box {
                padding: 25px 20px;
            }
            
            .phone-number {
                font-size: 22px;
            }
        }

#pickup-list, #delivery-list {
    position: absolute;  /* dropdown input ke relative */
    z-index: 9999;       /* upar dikhaye */
    background: #fff;    /* white background */
    border: 1px solid #ccc;
    max-height: 200px;   /* scrollable */
    overflow-y: auto;
    width: 100%;         /* input ke width ke barabar */
}
.item {
    padding: 8px;
    cursor: pointer;
}
.item:hover {
    background-color: #f0f0f0;
}

 


    </style>
</head>
<body>
    <div class="calculator calculator-wrapper">
        <div class="location-form">
          <h2 class="title-text p-0 pb-2"> Auto Transport Quote</h2>
          <h4 class="subtitle-text">Get an instant shipping quote in seconds</h4>
            <div class="location-form__tabs">
                <div class="location-form__tabs--link active" data-target="#route">
                    <div class="form-tab">
    <p>Route & Shipping</p>
</div>

                </div>
                <a href="track.html" class="location-form__tabs--link">
  <div class="form-tab">
  <p>Contact</p>
</div>

</a>

            </div>
            
            <div class="location-form__content">
                <div class="route-form active" id="route">
                    <form class="select-route legacy active" id="quote-form">
                        <!-- <h2 class="title-text p-0 pb-2">Calculate Your Auto Transport Cost</h2> -->
                        
                        <div class="form-wrapper">
                            <div class="group-icon">
                                <span>Route</span>
                            </div>
                            <div class="form-group from mt-0">
  <label for="pickup">From (ZIP or City, State)</label> 
  <input id="pickup" 
         type="text" 
         name="pickup" 
         class="route-control"
         placeholder=" Enter pickup location" 
         autocomplete="off" 
         required 
         tabindex="1">
  <div class="list-group" id="pickup-list"></div>
</div>


                            <div class="form-group to">
  <label for="delivery">To (ZIP or City, State)</label>
  <input id="delivery" 
         type="text" 
         name="delivery" 
         class="route-control"
         placeholder=" Enter delivery location" 
         autocomplete="off" 
         required 
         tabindex="2">
  <div class="list-group" id="delivery-list"></div>
</div>

                        </div>

                        <!-- Hidden fields for coordinates -->
<input type="hidden" id="pickup-lat">
<input type="hidden" id="pickup-lon">
<input type="hidden" id="delivery-lat">
<input type="hidden" id="delivery-lon">

                        
                        <div class="group-icon">
                            <span>Shipping</span>
                        </div>

                         <div class="form-row">
                <div class="form-field">
    <label for="vehicle-make">Make</label>
    <select id="vehicle-make" name="vehicle-make" required>
        <option value="">Select Make</option>
        <option value="toyota">Toyota</option>
        <option value="honda">Honda</option>
        <option value="ford">Ford</option>
        <option value="chevrolet">Chevrolet</option>
        <option value="nissan">Nissan</option>
        <option value="bmw">BMW</option>
        <option value="mercedes">Mercedes</option>
        <option value="audi">Audi</option>
        <option value="volkswagen">Volkswagen</option>
        <option value="hyundai">Hyundai</option>
    </select>
</div>

                <div class="form-field">
                    <label for="vehicle-model">Model</label>
                    <input type="text" placeholder=" Enter model"  id="vehicle-model" name="vehicle-model" required>
                </div>
            </div>

            <div class="form-row">
    <div class="form-field">
        <label for="vehicle-year">Year</label>
        <select id="vehicle-year" name="vehicle-year" required>
            <option value="">Select Year</option>
            <!-- Years will be populated by JavaScript -->
        </select>
    </div>

    <div class="form-field">
        <label for="shipping-date">Shipping Date:</label>
        <input type="date" id="shipping-date" name="shipping-date" required>
    </div>
</div>


             <div class="form-row">
        <div class="form-field">
            <label>Running:</label>
            <div class="radio-group">
                 <label class="radio-option">
                    <input type="radio" id="running-yes" name="running" value="yes" checked>
                    <span class="radio-dot"></span>
                    <span class="radio-label">Yes</span>
                </label>
                <label class="radio-option">
                    <input type="radio" id="running-no" name="running" value="no">
                    <span class="radio-dot"></span>
                    <span class="radio-label">No</span>
                </label>
            </div>
        </div>
        
        <div class="form-field">
            <label>Carrier Type:</label>
           <div class="radio-group">
    <label class="radio-option">
        <input type="radio" id="carrier-open" name="carrier-type" value="open" checked>
        <span class="radio-dot"></span>
        <span class="radio-label">Open</span>
    </label>

    <label class="radio-option">
        <input type="radio" id="carrier-enclosed" name="carrier-type" value="enclosed">
        <span class="radio-dot"></span>
        <span class="radio-label">Enclosed</span>
    </label>
</div>

        </div>
    </div>
                        
                        <!-- Pickup Date -->
                        <div class="form-group time">
                            <div class="dropdown time act-as-combobox">
                                <button id="time" class="route-control caret dropdown-toggle" type="button">
                                    <input type="text" name="time" class="route-control time" placeholder="Pickup Date" autocomplete="off" required tabindex="3" readonly>
                                </button>
                                <div class="dropdown-menu">
                                    <div class="dropdown-item">As soon as possible</div>
                                    <div class="dropdown-item">Within 7 days</div>
                                    <div class="dropdown-item">On a particular date</div>
                                    <div class="dropdown-item">I don't know yet</div>
                                </div>
                            </div>
                        </div>

                    
                        
   <!-- Trigger Link -->
<a id="addMoreVehicles" class="pl-2 modal-toggle w-100 text-add-car text-right" href="#">
  + Add More Vehicles
</a>

<!-- Popup -->
    <div class="popup-overlay" id="phonePopup">
        <div class="popup-box">
            <div class="popup-icon">üìû</div>
            <h3>Call Us</h3>
            <p>Speak directly with our shipping specialists</p>
            <p class="phone-number">+1 (786) 745-6259</p>
            <button class="close-popup">Close</button>
        </div>
    </div>

                        
                     <div class="dealer-wrapper">
  <input class="is-dealer" type="checkbox" id="isDealer" name="is-dealer" value="1">
  <label class="is-dealer-check" for="isDealer">Are you an automotive dealer?</label>
</div>

<div class="continue-buttons" id="buttonContainer">
  <input type="submit" id="route-confirm" class="btn" value="Continue to Contact">
  <button type="button" id="dealer-btn" class="btn dealer-btn hidden">
    Continue in<span class="mobile-break"><br></span>Dealership Portal
  </button>
</div>





<div class="success-message" id="success-message">
  Your quote request has been submitted successfully!
</div>


                    </form>
                </div>
            </div>
        </div>
    </div>

   
    <!-- Confirmation Page -->
<div id="confirmation-page" class="confirmation-page">
  <div class="confirmation-container">
    <!-- LEFT SIDE -->
    <div class="confirmation-left">
      <div class="confirmation-header">
       <h1> Let‚Äôs get you a quote that works for you.</h1>
        <h2>Get Your Lightning Fast Quote!</h2>
      </div>

      <form id="quote-details-form">
  <div class="form-field">
    <input type="tel" id="phone" name="phone" placeholder="Phone" required>
  </div>

  <div class="form-field">
    <input type="email" id="email" name="email" placeholder="Email" required onchange="sendEmailToOwner()">
  </div>

  <div class="checkbox-group">
    <label class="checkbox-item">
      <input type="checkbox" required>
      <span>
        By checking this box, you expressly authorize Nexus AT, LLC to call you, either manually or through an automated system. Your agreement to receive calls from Nexus AT, LLC is not a condition of this transaction. You are able to opt out of receiving calls at any time by emailing help@nexusautotransport.com.
      </span>
    </label>

    <label class="checkbox-item">
      <input type="checkbox" required>
      <span>
        By checking this box, I agree to receive SMS messages about Promotions or offers from Nexus Auto Transport at the number provided. Your agreement to receive SMS messaging from Nexus AT, LLC is not a condition of this transaction. You are able to opt-out of such messaging at any time by replying ‚ÄúSTOP.‚Äù Reply ‚ÄúHELP‚Äù for assistance. Message frequency may vary. Message and data rates may apply. SMS consent and phone numbers will not be shared with third parties or affiliates for marketing purposes. For further information, please visit our <a href="#">Privacy Policy</a> or <a href="#">Terms & Conditions</a>.
      </span>
    </label>
  </div>

  <div class="next-step-buttons">
    <button id="continue-btn" class="btn-primary">Continue</button>
  </div>

  <input type="hidden" id="pickup-lat">
  <input type="hidden" id="pickup-lon">
  <input type="hidden" id="delivery-lat">
  <input type="hidden" id="delivery-lon">

  <p class="terms-note">
    By using our website, you agree to be bound by our
    <a href="#">Terms and Conditions</a> and
    <a href="#">Privacy Policy</a>.
  </p>
</form>

    </div>

    <!-- RIGHT SIDE (SUMMARY) -->
    <div class="confirmation-right">
  <div class="summary-box">
    <h3>Summary of the Quote</h3>

    <!-- Vehicle Section -->
    <div class="summary-section">
      <div class="summary-header">
        <span class="summary-icon">üöó</span>
        <span class="summary-title">Vehicle</span>
        <button class="edit-btn">Edit ‚úèÔ∏è</button>
      </div>
      <div class="summary-body">
        <div id="summary-vehicle">Sedan Midsize</div>
      </div>
    </div>

    <hr>

    <!-- Route Section -->
    <div class="summary-section">
      <div class="summary-header">
        <span class="summary-icon">üìç</span>
        <span class="summary-title">Route</span>
      </div>
      <div class="summary-body">
        <div>From: <strong id="summary-pickup">Seattle, WA</strong></div>
        <div>To: <strong id="summary-dropoff">Dallas, TX</strong></div>
        <div>Date: <strong id="summary-date">Within 7 days</strong></div>
      </div>
    </div>
  </div>
</div>

  </div>
</div>

            
        
<script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
   <script>
// ==========================
//  100% FREE NOMINATIM AUTOCOMPLETE (USA)
//  Works for pickup + delivery inputs
//  Auto-fills: City, State, ZIP
// ==========================

// State short name map
const stateShortNames = {
  "Alabama": "AL","Alaska": "AK","Arizona": "AZ","Arkansas": "AR","California": "CA",
  "Colorado": "CO","Connecticut": "CT","Delaware": "DE","Florida": "FL","Georgia": "GA",
  "Hawaii": "HI","Idaho": "ID","Illinois": "IL","Indiana": "IN","Iowa": "IA","Kansas": "KS",
  "Kentucky": "KY","Louisiana": "LA","Maine": "ME","Maryland": "MD","Massachusetts": "MA",
  "Michigan": "MI","Minnesota": "MN","Mississippi": "MS","Missouri": "MO","Montana": "MT",
  "Nebraska": "NE","Nevada": "NV","New Hampshire": "NH","New Jersey": "NJ","New Mexico": "NM",
  "New York": "NY","North Carolina": "NC","North Dakota": "ND","Ohio": "OH","Oklahoma": "OK",
  "Oregon": "OR","Pennsylvania": "PA","Rhode Island": "RI","South Carolina": "SC","South Dakota": "SD",
  "Tennessee": "TN","Texas": "TX","Utah": "UT","Vermont": "VT","Virginia": "VA","Washington": "WA",
  "West Virginia": "WV","Wisconsin": "WI","Wyoming": "WY"
};

// ==========================
// DEBOUNCE FUNCTION
// ==========================
function debounce(fn, delay) {
  let timeout;
  return (...args) => {
    clearTimeout(timeout);
    timeout = setTimeout(() => fn(...args), delay);
  };
}

// ==========================
// NOMINATIM AUTOCOMPLETE
// ==========================
function setupNominatim(inputId, listId, confirmFieldId) {
  const input = document.getElementById(inputId);
  const list = document.getElementById(listId);

  const search = debounce(async () => {
    const q = input.value.trim();
    list.innerHTML = '';
    if (q.length < 1) {
      list.style.display = 'none';
      return;
    }

    let url;
    if (/^\d{5}$/.test(q)) {
      url = `https://nominatim.openstreetmap.org/search?format=jsonv2&countrycodes=us&addressdetails=1&postalcode=${q}`;
    } else {
      url = `https://nominatim.openstreetmap.org/search?format=jsonv2&countrycodes=us&addressdetails=1&limit=8&q=${encodeURIComponent(q)}`;
    }

    try {
      const res = await fetch(url, { headers: { 'Accept-Language': 'en' } });
      const data = await res.json();

      if (!data.length) {
        const no = document.createElement('div');
        no.className = 'item';
        no.textContent = 'No results found';
        list.appendChild(no);
        list.style.display = 'block';
        return;
      }

      list.style.position = 'absolute';
list.style.top = input.offsetTop + input.offsetHeight + 'px';
list.style.left = input.offsetLeft + 'px';
list.style.width = input.offsetWidth + 'px';
list.style.zIndex = 9999;  // sabse upar


      data.forEach(place => {
        const addr = place.address || {};
        const city = addr.city || addr.town || addr.village || addr.county || '';
        const stateFull = addr.state || '';
        const state = stateShortNames[stateFull] || stateFull;
        const zip = addr.postcode || '';
        const label = `${city ? city + ', ' : ''}${state}${zip ? ' ' + zip : ''}`;

        const div = document.createElement('div');
        div.className = 'item';
        div.innerHTML = `<strong>${city || place.display_name.split(',')[0]}</strong>, ${state}${zip ? ' <span class="zip-code">' + zip + '</span>' : ''}`;
        div.onclick = () => {
  input.value = label;
  list.style.display = 'none';
  
  // Save selected location
  const confirmEl = document.getElementById(confirmFieldId);
  if (confirmEl) confirmEl.value = label;
  
  // üîπ Update summary instantly
  if (inputId === 'pickup') {
    const summaryPickup = document.getElementById('summary-pickup');
    if (summaryPickup) summaryPickup.textContent = label;
  } else if (inputId === 'delivery') {
    const summaryDropoff = document.getElementById('summary-dropoff');
    if (summaryDropoff) summaryDropoff.textContent = label;
  }

  // üîπ Save to localStorage immediately
  saveFormData();
};


div.onclick = () => {
  input.value = label;
  list.style.display = 'none';
  
  const confirmEl = document.getElementById(confirmFieldId);
  if (confirmEl) confirmEl.value = label;
  
  if (inputId === 'pickup') {
    const summaryPickup = document.getElementById('summary-pickup');
    if (summaryPickup) summaryPickup.textContent = label;
  } else if (inputId === 'delivery') {
    const summaryDropoff = document.getElementById('summary-dropoff');
    if (summaryDropoff) summaryDropoff.textContent = label;
  }

  saveFormData();
};

// ‚úÖ Add this just after div.onclick
div.addEventListener('touchstart', () => {
  input.value = label;
  list.style.display = 'none';
  
  const confirmEl = document.getElementById(confirmFieldId);
  if (confirmEl) confirmEl.value = label;

  if (inputId === 'pickup') {
      const summaryPickup = document.getElementById('summary-pickup');
      if (summaryPickup) summaryPickup.textContent = label;
  } else if (inputId === 'delivery') {
      const summaryDropoff = document.getElementById('summary-dropoff');
      if (summaryDropoff) summaryDropoff.textContent = label;
  }

  saveFormData();
});

        list.appendChild(div);
      });
      list.style.display = 'block';
    } catch (e) {
      console.error(e);
    }
  }, 300);

  input.addEventListener('input', search);

  // Hide list on outside click
  document.addEventListener('click', e => {
    if (!e.target.closest(`#${inputId}`) && !e.target.closest(`#${listId}`)) {
      list.style.display = 'none';
    }
  });
}

// ==========================
// SAVE FORM DATA TO LOCALSTORAGE
// ==========================
function saveFormData() {
    // Get all form values
    const vehicleMake = document.getElementById('vehicle-make').value;
    const vehicleModel = document.getElementById('vehicle-model').value;
    const vehicleYear = document.getElementById('vehicle-year').value;
    const pickupLocation = document.getElementById('pickup').value;
    const deliveryLocation = document.getElementById('delivery').value;
    const shippingDate = document.getElementById('shipping-date').value;
    const vehicleCondition = document.querySelector('input[name="running"]:checked').value;
    const carrierType = document.querySelector('input[name="carrier-type"]:checked').value;
    const pickupDate = document.querySelector('#time input').value;

    // Save to localStorage
    localStorage.setItem('vehicleMake', vehicleMake);
    localStorage.setItem('vehicleModel', vehicleModel);
    localStorage.setItem('vehicleYear', vehicleYear);
    localStorage.setItem('pickupLocation', pickupLocation);
    localStorage.setItem('deliveryLocation', deliveryLocation);
    localStorage.setItem('shippingDate', shippingDate);
    localStorage.setItem('vehicleCondition', vehicleCondition);
    localStorage.setItem('carrierType', carrierType);
    localStorage.setItem('pickupDate', pickupDate);
    
    return true;
}

// ==========================
// DOCUMENT READY
// ==========================
document.addEventListener('DOMContentLoaded', () => {

  // ---------- SETUP AUTOCOMPLETE ----------
  setupNominatim('pickup', 'pickup-list', 'pickup-zip');
  setupNominatim('delivery', 'delivery-list', 'dropoff-zip');

  // ---------- POPULATE VEHICLE YEARS ----------
  const yearSelect = document.getElementById('vehicle-year');
  const currentYear = new Date().getFullYear();
  for (let y = currentYear; y >= 1980; y--) {
    const o = document.createElement('option');
    o.value = y;
    o.textContent = y;
    yearSelect.appendChild(o);
  }

  // ---------- SET MIN DATE ----------
  const today = new Date().toISOString().split('T')[0];
  const shippingDate = document.getElementById('shipping-date');
  if (shippingDate) shippingDate.min = today;

  // ---------- FORM SUBMIT HANDLERS ----------
  const quoteForm = document.getElementById('quote-form');
  const quoteDetailsForm = document.getElementById('quote-details-form');

  if (quoteForm) {
    quoteForm.addEventListener('submit', e => {
      e.preventDefault();
      document.querySelector('.calculator').style.display = 'none';
      document.getElementById('confirmation-page').style.display = 'block';
      document.getElementById('pickup-zip').value = document.getElementById('pickup').value;
      document.getElementById('dropoff-zip').value = document.getElementById('delivery').value;
    });
  }

  if (quoteDetailsForm) {
    quoteDetailsForm.addEventListener('submit', e => {
      e.preventDefault();
      document.getElementById('success-message').style.display = 'block';
      setTimeout(() => {
        e.target.reset();
        document.getElementById('success-message').style.display = 'none';
        document.getElementById('confirmation-page').style.display = 'none';
        document.querySelector('.calculator').style.display = 'block';
      }, 3000);
    });
  }

  // ---------- BACK BUTTON ----------
  const backBtn = document.getElementById('back-btn');
  if (backBtn) {
    backBtn.addEventListener('click', () => {
      document.getElementById('confirmation-page').style.display = 'none';
      document.querySelector('.calculator').style.display = 'block';
    });
  }

  // ---------- DROPDOWN FUNCTIONALITY ----------
  document.querySelectorAll('.dropdown-toggle').forEach(button => {
    button.addEventListener('click', function(e) {
      e.stopPropagation();
      const dropdown = this.parentElement;
      const isOpen = dropdown.classList.contains('open');
      document.querySelectorAll('.dropdown').forEach(d => d.classList.remove('open'));
      if (!isOpen) dropdown.classList.add('open');
    });
  });

  document.addEventListener('click', () => {
    document.querySelectorAll('.dropdown').forEach(d => d.classList.remove('open'));
  });

  // ---------- TABS ----------
  document.querySelectorAll('.location-form__tabs--link').forEach(tab => {
    tab.addEventListener('click', function() {
      const target = this.getAttribute('data-target');
      document.querySelectorAll('.location-form__tabs--link').forEach(t => t.classList.remove('active'));
      this.classList.add('active');
      document.querySelectorAll('.location-form__content > div').forEach(content => content.classList.remove('active'));
      document.querySelector(target).classList.add('active');
    });
  });

  // ---------- PICKUP TIME ----------
  document.querySelectorAll('.time .dropdown-item').forEach(item => {
    item.addEventListener('click', () => {
      document.querySelector('#time input').value = item.textContent;
      document.querySelector('.time.dropdown').classList.remove('open');
      saveFormData(); // Save when pickup date is selected
    });
  });

  // ---------- CAR SELECT ----------
  document.querySelectorAll('.size-of-car .car-item').forEach(item => {
    item.addEventListener('click', () => {
      const input = document.querySelector('#size-of-car input');
      if (!item.classList.contains('plus-box')) {
        input.value = item.querySelector('small').textContent;
        document.querySelector('.size-of-car.dropdown').classList.remove('open');
      }
    });
  });

  // Show more cars
  const showMoreCarsBtn = document.getElementById('showMoreCars');
  if (showMoreCarsBtn) {
    showMoreCarsBtn.addEventListener('click', () => {
      document.getElementById('moreCars').classList.toggle('hidden-cars');
    });
  }

  // Add More Vehicles popup
  const phonePopup = document.getElementById('phonePopup');
  const addMoreVehiclesBtn = document.getElementById('addMoreVehicles');
  if (addMoreVehiclesBtn) {
    addMoreVehiclesBtn.addEventListener('click', e => {
      e.preventDefault();
      phonePopup.style.display = 'flex';
    });
  }

  document.querySelectorAll('.close-popup').forEach(closeBtn => {
    closeBtn.addEventListener('click', () => phonePopup.style.display = 'none');
  });

  if (phonePopup) {
    phonePopup.addEventListener('click', e => { if (e.target === phonePopup) phonePopup.style.display = 'none'; });
    document.addEventListener('keydown', e => { if (e.key === 'Escape') phonePopup.style.display = 'none'; });
  }

  // ---------- DEALER TOGGLE ----------
  const checkbox = document.getElementById('isDealer');
  const dealerBtn = document.getElementById('dealer-btn');
  const btnContainer = document.getElementById('buttonContainer');

  function updateDealerUI() {
    if (checkbox.checked) {
      dealerBtn.classList.remove('hidden');
      btnContainer.classList.add('show-dealer');
    } else {
      dealerBtn.classList.add('hidden');
      btnContainer.classList.remove('show-dealer');
    }
  }
  if (checkbox) {
    updateDealerUI();
    checkbox.addEventListener('change', updateDealerUI);
  }

  // ---------- SUMMARY ELEMENTS ----------
  const summaryVehicle = document.getElementById('summary-vehicle');
  const summaryPickup = document.getElementById('summary-pickup');
  const summaryDropoff = document.getElementById('summary-dropoff');
  const summaryDate = document.getElementById('summary-date');

  const pickupInput = document.getElementById('pickup');
  const deliveryInput = document.getElementById('delivery');
  const vehicleMake = document.getElementById('vehicle-make');
  const vehicleModel = document.getElementById('vehicle-model');
  const vehicleYear = document.getElementById('vehicle-year');

  // ---------- HELPER: LIST CLICK ----------
  function setSummaryFromList(input, summaryEl, listId) {
    const listItems = document.getElementById(listId).querySelectorAll('.item');
    listItems.forEach(item => {
      item.addEventListener('click', () => {
        input.value = item.textContent;
        summaryEl.textContent = item.textContent;
        saveFormData(); // Save when location is selected
      });
    });
  }

  setSummaryFromList(pickupInput, summaryPickup, 'pickup-list');
  setSummaryFromList(deliveryInput, summaryDropoff, 'delivery-list');

  // ---------- INPUT EVENT: MANUAL TYPING ----------
  pickupInput.addEventListener('input', () => {
    summaryPickup.textContent = pickupInput.value || 'Select pickup';
    saveFormData(); // Auto-save when typing
  });

  deliveryInput.addEventListener('input', () => {
    summaryDropoff.textContent = deliveryInput.value || 'Select dropoff';
    saveFormData(); // Auto-save when typing
  });

  // ---------- GOOGLE AUTOCOMPLETE ----------
  if (typeof google !== 'undefined') {
    const pickupAutocomplete = new google.maps.places.Autocomplete(pickupInput, {
      types: ['(cities)']
    });
    const deliveryAutocomplete = new google.maps.places.Autocomplete(deliveryInput, {
      types: ['(cities)']
    });

    pickupAutocomplete.addListener('place_changed', () => {
      const place = pickupAutocomplete.getPlace();
      if (place && place.formatted_address) {
        pickupInput.value = place.formatted_address;
        summaryPickup.textContent = place.formatted_address;
        saveFormData();
      }
    });

    deliveryAutocomplete.addListener('place_changed', () => {
      const place = deliveryAutocomplete.getPlace();
      if (place && place.formatted_address) {
        deliveryInput.value = place.formatted_address;
        summaryDropoff.textContent = place.formatted_address;
        saveFormData();
      }
    });
  }

  // ---------- VEHICLE SUMMARY ----------
  function updateVehicleSummary() {
    const make = vehicleMake.value;
    const model = vehicleModel.value;
    const year = vehicleYear.value;
    summaryVehicle.textContent =
      `${year ? year + ' ' : ''}${make ? make.charAt(0).toUpperCase() + make.slice(1) : ''}${model ? ' ' + model : ''}`.trim() || 'Select vehicle';
    saveFormData(); // Save when vehicle details change
  }
  if (vehicleMake) vehicleMake.addEventListener('change', updateVehicleSummary);
  if (vehicleModel) vehicleModel.addEventListener('input', updateVehicleSummary);
  if (vehicleYear) vehicleYear.addEventListener('change', updateVehicleSummary);

  // ---------- PICKUP DATE SUMMARY ----------
  document.querySelectorAll('.time .dropdown-item').forEach(item => {
    item.addEventListener('click', () => {
      if (summaryDate) summaryDate.textContent = item.textContent;
      document.querySelector('.time input').value = item.textContent;
      saveFormData(); // Save when pickup date is selected
    });
  });

  // ---------- AUTO-SAVE FORM DATA ON CHANGE ----------
  // Auto-save when form fields change
  const formFields = [
    'vehicle-make', 'vehicle-model', 'vehicle-year', 'pickup', 'delivery',
    'shipping-date'
  ];

  formFields.forEach(fieldId => {
    const element = document.getElementById(fieldId);
    if (element) {
      element.addEventListener('change', saveFormData);
    }
  });

  // For radio buttons, add event listeners to both
  document.querySelectorAll('input[name="running"]').forEach(radio => {
    radio.addEventListener('change', saveFormData);
  });

  document.querySelectorAll('input[name="carrier-type"]').forEach(radio => {
    radio.addEventListener('change', saveFormData);
  });

});

// ==========================
// DISTANCE CALCULATION (NO API KEY)
// ==========================

// Helper: Convert meters to miles
function metersToMiles(meters) {
  return (meters / 1609.34).toFixed(1);
}

// Get coordinates using Nominatim
async function getCoordinates(address) {
  const url = `https://nominatim.openstreetmap.org/search?format=json&limit=1&q=${encodeURIComponent(address)}`;

  // üîπ TEMPORARY PROXY FOR TESTING ONLY
  const proxy = 'https://cors-anywhere.herokuapp.com/';

  const res = await fetch(proxy + url, { headers: { 'Accept-Language': 'en' } });
  const data = await res.json();
  if (data.length > 0) {
    return { lat: parseFloat(data[0].lat), lon: parseFloat(data[0].lon) };
  }
  return null;
}


// Get distance from OSRM API
async function getDistance(pickup, dropoff) {
  const url = `https://router.project-osrm.org/route/v1/driving/${pickup.lon},${pickup.lat};${dropoff.lon},${dropoff.lat}?overview=false`;

  // üîπ TEMPORARY PROXY FOR TESTING ONLY
  const proxy = 'https://cors-anywhere.herokuapp.com/';

  const res = await fetch(proxy + url);
  const data = await res.json();
  if (data && data.routes && data.routes.length > 0) {
    return data.routes[0].distance; // in meters
  }
  return null;
}


// Combine everything
async function calculateMiles() {
  const pickupAddress = document.getElementById('pickup').value;
  const deliveryAddress = document.getElementById('delivery').value;

  if (!pickupAddress || !deliveryAddress) return;

  // Get lat/lon for both
  const pickup = await getCoordinates(pickupAddress);
  const dropoff = await getCoordinates(deliveryAddress);

  if (!pickup || !dropoff) {
    alert("Couldn't find route for given addresses.");
    return;
  }

  // Store coordinates (optional)
  document.getElementById('pickup-lat').value = pickup.lat;
  document.getElementById('pickup-lon').value = pickup.lon;
  document.getElementById('delivery-lat').value = dropoff.lat;
  document.getElementById('delivery-lon').value = dropoff.lon;

  // Get route distance
  const distanceMeters = await getDistance(pickup, dropoff);
  if (!distanceMeters) {
    alert("Route not found.");
    return;
  }

  // Convert to miles
  const miles = metersToMiles(distanceMeters);
  console.log(`Distance: ${miles} miles`);

  // Show on page (you can customize this)
  const summaryEl = document.getElementById('summary-distance');
  if (summaryEl) {
    summaryEl.textContent = `${miles} miles`;
  } 
//   else {
//     alert(`Distance: ${miles} miles`);
//   }
}

// Run calculation automatically when both fields filled
  if (document.getElementById('delivery')) {
    document.getElementById('delivery').addEventListener('change', calculateMiles);
  }

  // ==========================
  // UPDATED CONTINUE BUTTON HANDLER (FIXED)
  // ==========================
  const continueBtn = document.getElementById('continue-btn');
  if (continueBtn) {
    continueBtn.addEventListener('click', function(e) {
      e.preventDefault();

      // First save all form data
      if (!saveFormData()) {
        alert("Please fill all required fields.");
        return;
      }

      const pickupLat = document.getElementById('pickup-lat').value;
      const pickupLon = document.getElementById('pickup-lon').value;
      const deliveryLat = document.getElementById('delivery-lat').value;
      const deliveryLon = document.getElementById('delivery-lon').value;

      // If any coordinate missing, skip API and just go next page
      if (!pickupLat || !pickupLon || !deliveryLat || !deliveryLon) {
        window.location.href = "pricing.html";
        return;
      }

      // Call OSRM API to get distance
      const url = `https://router.project-osrm.org/route/v1/driving/${pickupLon},${pickupLat};${deliveryLon},${deliveryLat}?overview=false`;
      const proxy = 'https://cors-anywhere.herokuapp.com/';

      fetch(proxy + url)
        .then(res => res.json())
        .then(data => {
          if (data.routes && data.routes.length > 0) {
            const meters = data.routes[0].distance;
            const miles = (meters / 1609.34).toFixed(2);
            localStorage.setItem('tripMiles', miles);
          }
          // ‚úÖ Always go to pricing page even if API fails
          window.location.href = "pricing.html";
        })
        .catch(() => {
          // ‚úÖ No alert, just go to pricing
          window.location.href = "pricing.html";
        });
    });
  }

  // ==========================
  // EMAILJS INITIALIZATION + EMAIL FUNCTION
  // ==========================
  (function() {
    emailjs.init("9xcmQmNrpysoLipQc"); // ‚úÖ your public key
  })();

  function sendEmailToOwner() {
    const make = document.getElementById("vehicle-make")?.value || "";
    const model = document.getElementById("vehicle-model")?.value || "";
    const year = document.getElementById("vehicle-year")?.value || "";
    const pickup_location = document.getElementById("pickup")?.value || "";
    const delivery_location = document.getElementById("delivery")?.value || "";
    const pickup_date = document.getElementById("shipping-date")?.value || "";
    const delivery_date = document.getElementById("shipping-date")?.value || "";
    const route = pickup_location + " ‚Üí " + delivery_location;
    const carrier_type = document.querySelector('input[name="carrier-type"]:checked')?.value || "Open";
    const status = "Pending";
    const price = localStorage.getItem("tripMiles") ? `$${localStorage.getItem("tripMiles")}` : "N/A";
    const email = document.getElementById("email")?.value || "";
    const phone = document.getElementById("phone")?.value || "";
    const name = document.getElementById("name")?.value || "Customer";

    const templateParams = {
      make, model, year,
      pickup_location, delivery_location,
      pickup_date, delivery_date,
      route, carrier_type, status,
      price, email, phone, name
    };

    emailjs.send("service_blm8kta", "template_7loc89s", templateParams)
      .then(response => {
        console.log("‚úÖ Email sent successfully:", response);
        alert("Email sent to owner!");
      })
      .catch(error => {
        console.error("‚ùå Error sending email:", error);
        alert("Failed to send email. Check console for details.");
      });
  }

  
  // document.querySelectorAll('.location-form__tabs--link').forEach(tab => {
  //   tab.addEventListener('click', () => {
  //     document.querySelectorAll('.location-form__tabs--link').forEach(t => t.classList.remove('active'));
  //     tab.classList.add('active');
  //   });
  // });

  
</script>
</body>
</html>