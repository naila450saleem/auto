<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Auto Transport Calculator</title>
    <style>
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: Arial, sans-serif;
}

body {
    background-color: #f5f5f5;
    padding: 20px;
}

.calculator {
    background-color: #fff;
    border-radius: 8px;
    padding: 30px;
    max-width: 600px;
    margin: 0 auto;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
}

/* Tabs Section */
.location-form__tabs {
    display: flex;
    justify-content: space-between;
    align-items: center;
    width: 100%;
    margin-bottom: 25px;
    border-bottom: 1px solid #eee;
}

.location-form__tabs--link {
    padding: 15px 20px;
    cursor: pointer;
    display: flex;
    align-items: center;
    border-bottom: 3px solid transparent;
    background-color: transparent;
}

.location-form__tabs--link.active {
    border-bottom: 3px solid #0066cc;
}

.form-tab {
    display: flex;
    align-items: center;
    gap: 8px;
}

.form-tab p {
    font-weight: bold;
    color: #333;
}

/* Titles and Section Headings */
.title-text {
    font-size: 24px;
    font-weight: bold;
    margin-bottom: 25px;
    color: #09265e;
}

.group-icon {
    display: flex;
    align-items: center;
    margin-bottom: 15px;
    color: #09265e;
    font-weight: bold;
}

.group-icon svg {
    margin-right: 10px;
}

/* Form Elements */
.form-wrapper {
    margin-bottom: 20px;
}

.form-group {
    margin-bottom: 15px;
    position: relative;
}

.route-control {
    width: 100%;
    padding: 12px 15px;
    border: 1px solid #ddd;
    border-radius: 6px;
    font-size: 16px;
    background-color: #fff;
    color: #333;
    transition: border-color 0.3s ease, box-shadow 0.3s ease;
}

.route-control:focus {
    outline: none;
    border-color: #0066cc;
    box-shadow: 0 0 5px rgba(0, 102, 204, 0.3);
}

.text-add-car {
    color: #0066cc;
    font-weight: bold;
    text-decoration: none;
    display: block;
    margin: 15px 0;
}

/* Dealer Section */
.dealer-wrapper {
    display: flex;
    align-items: center;
    margin: 20px 0;
}

.is-dealer {
    margin-right: 10px;
}

/* Continue Button */
/* Green area background */
.continue-buttons {
  display: flex;
  justify-content: center;
  align-items: center;
  background-color: #b6f87c;
  padding: 2px 0;
  border-radius: 6px;
  transition: all 0.3s ease;
}

.btn {
  background: transparent;
  border: none;
  color: #002b5c;
  font-weight: 600;
  padding: 14px 30px;
  width: 50%;
  cursor: pointer;
  text-align: center;
  font-size: 16px;
}

.btn + .btn {
  border-left: 2px solid #a1ea6d;
}

.hidden {
  display: none !important;
}

.continue-buttons.show-dealer {
  justify-content: space-between;
}


.continue-buttons.show-dealer .btn {
  width: 100%;
}

/* --- Mobile: only break text in 2nd button --- */
@media (max-width: 768px) {
  .mobile-break {
    display: inline;
  }

  .continue-buttons .btn {
    font-size: 14px;
    padding: 10px 14px;
  }
    /* Increase line-height only for the second button */
  #dealer-btn {
    line-height: 1.6; /* adjust spacing between lines */
  }

}

/* Hide <br> on desktop */
@media (min-width: 769px) {
  .mobile-break {
    display: none;
  }
}

.next-step-buttons {
    text-align: center; /* buttons center me */
    margin-top: 20px;
}

.btn-primary {
    background-color: #b6f87c; /* blue color */
    color: #000;
    border: none;
    padding: 14px 30px;
    font-size: 1rem;
    border-radius: 8px;
    cursor: pointer;
    transition: background-color 0.3s ease;
    width: 100%;
    font-weight: bold;
}

.btn-primary:hover {
    background-color: #87c155;
}



/* Dropdown Styles */
.dropdown {
    position: relative;
    background-color: #fff;
    width: 100%;
}

.dropdown-toggle {
    display: flex;
    align-items: center;
    justify-content: space-between;
    width: 100%;
    background-color: #fff;
    border: 1px solid #ddd;
    border-radius: 6px;
    padding: 4px 10px;
    cursor: pointer;
    position: relative;
    transition: border-color 0.3s ease, box-shadow 0.3s ease;
}

.dropdown-toggle input {
    border: none;
    outline: none;
    background: transparent;
    width: 100%;
    font-size: 16px;
    color: #333;
    pointer-events: none;
}

.dropdown-toggle::after {
    content: "‚ñ≤";
    font-size: 12px;
    color: #666;
    position: absolute;
    right: 15px;
    top: 50%;
    transform: translateY(-50%);
    pointer-events: none;
    transition: transform 0.3s ease;
}

.dropdown.open .dropdown-toggle::after {
    transform: translateY(-50%) rotate(180deg);
}

.dropdown-toggle:focus-within {
    border-color: #0066cc;
    box-shadow: 0 0 5px rgba(0, 102, 204, 0.3);
}

.dropdown-menu {
    position: absolute;
    top: calc(100% + 5px);
    left: 0;
    right: 0;
    background: #fff;
    border: 1px solid #ddd;
    border-radius: 6px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    z-index: 1000;
    max-height: 300px;
    overflow-y: auto;
    display: none;
}

.dropdown.open .dropdown-menu {
    display: block;
}

.dropdown-item {
    padding: 10px 15px;
    cursor: pointer;
    display: flex;
    align-items: center;
    background-color: #fff;
    transition: background 0.2s ease;
}

.dropdown-item:hover {
    background-color: #f5f5f5;
}

.dropdown-item svg {
    margin-right: 10px;
    width: 20px;
    height: 20px;
}

/* Cars grid */
.cars-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 10px;
  padding: 10px;
}

.car-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  cursor: pointer;
  padding: 8px;
  background: #fff;
  transition: 0.2s;
  border: 1px solid transparent;
  border-radius: 8px;
}

.car-item:hover {
  border-color: #0066cc;
  box-shadow: 0 0 5px rgba(0,102,204,0.3);
}

.car-item img {
  width: 70px;
  height: auto;
  margin-bottom: 5px;
}

.plus-box {
  display: flex;
  align-items: center;
  justify-content: center;
  background: #e6f0ff;
  border: 1px solid #0066cc;
  border-radius: 8px;
  font-size: 30px;
  color: #0066cc;
  cursor: pointer;
}

.hidden-cars {
  display: none;
}

.header {
    padding: 10px 15px;
    background-color: #f9f9f9;
    font-weight: bold;
    border-bottom: 1px solid #eee;
}

/* Location suggestions styling */
.list-group {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    background: white;
    border: 1px solid #ddd;
    border-top: none;
    border-radius: 0 0 6px 6px;
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    z-index: 1000;
    max-height: 200px;
    overflow-y: auto;
    display: none;
}

.list-group .item {
    padding: 10px 15px;
    cursor: pointer;
    border-bottom: 1px solid #f0f0f0;
}

.list-group .item:hover {
    background-color: #f5f5f5;
}

.list-group .item:last-child {
    border-bottom: none;
}

.list-group .item strong {
    color: #0066cc;
}

.list-group .item small {
    color: #666;
    font-size: 12px;
}

/* Loading indicator */
.loading {
    padding: 10px 15px;
    color: #666;
    font-style: italic;
    text-align: center;
}

/* Success message */
.success-message {
    background-color: #e6f7e9;
    border: 1px solid #4caf50;
    border-radius: 4px;
    padding: 10px;
    margin-top: 15px;
    text-align: center;
    color: #2e7d32;
    display: none;
}

/* Confirmation Page Styles */
.confirmation-header {
    text-align: center;
}

.confirmation-header h1 {
    font-size: 2.5rem; /* large heading */
    font-weight: 700;  /* bold */
    color: #1f2937;    /* dark gray */
    margin-bottom: 10px;
    line-height: 1.2;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    margin-bottom: 20px; 
}

.confirmation-header h2 {
    font-size: 1.5rem; /* slightly smaller */
    font-weight: 500;
    color: #4b5563;    /* medium gray */
    margin-top: 0;
    line-height: 1.4;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}

.confirmation-container {
  display: flex;
  gap: 30px;
  align-items: flex-start;
  margin-top: 5%;
  margin-left: 5%;
}

.confirmation-left {
  flex: 1;
}

.confirmation-right {
  flex: 0 0 300px;
  background: #f7f8fc;
  padding: 20px;
  border-radius: 10px;
  box-shadow: 0 3px 10px rgba(0,0,0,0.05);
  font-family: 'Poppins', sans-serif;
}

.summary-box h3 {
  color: #09265e;
  margin-bottom: 20px;
  font-size: 18px;
  font-weight: 700;
  border-bottom: 1px solid #e5e8f0;
  padding-bottom: 10px;
}

.summary-section {
  margin-bottom: 15px;
}

.summary-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 8px;
}

.summary-icon {
  font-size: 18px;
  margin-right: 5px;
}

.summary-title {
  font-weight: 600;
  color: #09265e;
  font-size: 16px;
  flex-grow: 1;
}

.edit-btn {
  background: #eef1f8;
  border: none;
  border-radius: 6px;
  padding: 4px 10px;
  font-size: 13px;
  color: #09265e;
  cursor: pointer;
  transition: background 0.2s;
}

.edit-btn:hover {
  background: #dfe4f0;
}

.summary-body {
  padding-left: 24px;
  color: #333;
  font-size: 15px;
  line-height: 1.5;
}

hr {
  border: none;
  border-top: 1px solid #eaeaea;
  margin: 12px 0;
}


.checkbox-group {
  display: flex;
  flex-direction: column;
  gap: 15px;
  margin-top: 20px;
}

.checkbox-item {
  display: flex;
  align-items: flex-start;
  gap: 10px;
}

.checkbox-item input {
  margin-top: 4px;
}

.checkbox-item span {
  font-size: 14px;
  color: #444;
  line-height: 1.5;
}

.checkbox-item a {
  color: #09265e;
  text-decoration: underline;
}

.terms-note {
  margin-top: 20px;
  font-size: 13px;
  color: #555;
}

.terms-note a {
  color: #09265e;
  text-decoration: underline;
}

#confirmation-page {
  display: none;
}

/* Responsive Styles */
@media (max-width: 1024px) {
    .confirmation-container {
        flex-direction: column;
        margin-left: 3%;
        margin-right: 3%;
        gap: 20px;
    }

    .confirmation-left,
    .confirmation-right {
        flex: 1 1 100%;
    }

    .confirmation-right {
        padding: 15px;
    }

    .summary-box h3 {
        font-size: 18px;
    }

    .summary-item {
        font-size: 14px;
    }
}

@media (max-width: 768px) {
    .confirmation-header h1 {
        font-size: 2rem;
        margin-bottom: 15px;
    }

    .confirmation-header h2 {
        font-size: 1.25rem;
    }

    .confirmation-container {
        margin-top: 3%;
        gap: 15px;
    }

      .confirmation-right {
    justify-content: center; /* mobile pe center align karega */
    padding-right: 0;
  }

  .summary-box {
    max-width: 100%;
  }
}

@media (max-width: 480px) {
    .confirmation-header h1 {
        font-size: 1.75rem;
    }

    .confirmation-header h2 {
        font-size: 1.1rem;
    }

    .confirmation-right {
        padding: 10px;
        flex: 1 1 100%;
    }

    .summary-box h3 {
        font-size: 16px;
        padding-right: 40px;
    }

    .summary-item {
        font-size: 13px;
    }

    .checkbox-group {
        gap: 10px;
    }

    .terms-note {
        font-size: 12px;
    }
}

.form-row {
    display: flex;
    gap: 15px;
    margin-bottom: 20px;
}

.form-field {
    flex: 1;
}

.form-field label {
    display: block;
    margin-bottom: 8px;
    font-weight: bold;
    color: #333;
}

.form-field input, .form-field select {
    width: 100%;
    padding: 12px 15px;
    border: 1px solid #ddd;
    border-radius: 6px;
    font-size: 16px;
    margin-top: 10px;
}

.radio-group {
    display: inline-flex;
    margin-top: 5px;
    border: 1px solid #ddd;
    border-radius: 6px;
    overflow: hidden; /* removes gap visually */
}

.radio-option {
    flex: 0;
}

.radio-option input {
    display: none;
}

.radio-option label {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 10px 20px;
    border: 1px solid #ddd;
    border-radius: none;
    background-color: #fff;
    cursor: pointer;
    transition: all 0.3s ease;
    width: 100%;
    text-align: center;
    font-weight: normal;
    margin-bottom: 0;
}

.radio-option input:checked + label {
    border-color: #ddd;
    background-color: #a9475b;
    color: #fff;
    font-weight: bold;
}

.radio-option label:hover {
    border-color: #ddd;
}

.promise-box {
    background-color: #f8f9fa;
    border-left: 4px solid #0066cc;
    padding: 15px;
    margin: 20px 0;
    border-radius: 4px;
}

.promise-box h3 {
    color: #09265e;
    margin-bottom: 10px;
}

/* Responsive: stack buttons on small screens */
@media (max-width: 600px) {
    .radio-group {
        flex-direction: column;
    }
    .radio-option:not(:last-child) label {
        border-right: none;
        border-bottom: 1px solid #ddd;
    }
}

.optional-section {
    margin-top: 20px;
    padding-top: 20px;
    border-top: 1px dashed #ddd;
}

.optional-section h3 {
    color: #666;
    font-size: 16px;
    margin-bottom: 10px;
    display: flex;
    align-items: center;
    gap: 8px;
}

.optional-section h3:before {
    content: "+";
    background: #bdc3c7;
    color: white;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 14px;
}

.back-btn {
    background-color: #6c757d;
    margin-top: 10px;
}

.back-btn:hover {
    background-color: #5a6268;
}

.zip-code {
    font-size: 12px;
    color: #666;
    margin-left: 5px;
}

/* --- Popup Background --- */
  /* --- Popup Styling --- */
        .popup-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .popup-box {
            background: #fff;
            padding: 30px;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            max-width: 400px;
            width: 90%;
            animation: fadeIn 0.3s ease;
            position: relative;
        }

        .popup-box h3 {
            margin-bottom: 15px;
            color: #2c3e50;
            font-size: 24px;
        }
        
        .popup-box p {
            margin-bottom: 20px;
            font-size: 16px;
            color: #555;
        }

        .phone-number {
            font-size: 28px;
            font-weight: 700;
            color: #3498db;
            margin: 15px 0;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 8px;
            display: inline-block;
        }

        .close-popup {
            background: #3498db;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            color: #fff;
            cursor: pointer;
            margin-top: 10px;
            font-weight: 600;
            transition: all 0.3s ease;
            width: 100%;
        }

        .close-popup:hover {
            background: #2980b9;
        }
        
        .popup-icon {
            font-size: 50px;
            color: #3498db;
            margin-bottom: 15px;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: scale(0.8);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }
        
        /* Responsive adjustments */
        @media (max-width: 600px) {
            .container {
                padding: 20px 15px;
            }
            
            .popup-box {
                padding: 25px 20px;
            }
            
            .phone-number {
                font-size: 22px;
            }
        }

#pickup-list, #delivery-list {
    position: absolute;  /* dropdown input ke relative */
    z-index: 9999;       /* upar dikhaye */
    background: #fff;    /* white background */
    border: 1px solid #ccc;
    max-height: 200px;   /* scrollable */
    overflow-y: auto;
    width: 100%;         /* input ke width ke barabar */
}
.item {
    padding: 8px;
    cursor: pointer;
}
.item:hover {
    background-color: #f0f0f0;
}

       
    </style>
</head>
<body>
    <div class="calculator calculator-wrapper">
        <div class="location-form">
            <div class="location-form__tabs">
                <div class="location-form__tabs--link active" data-target="#route">
                    <div class="form-tab">
                        <svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="none">
                            <path d="M12.0586 11.5C11.3956 11.5 10.7597 11.2366 10.2908 10.7678C9.82199 10.2989 9.55859 9.66304 9.55859 9C9.55859 8.33696 9.82199 7.70107 10.2908 7.23223C10.7597 6.76339 11.3956 6.5 12.0586 6.5C12.7216 6.5 13.3575 6.76339 13.8264 7.23223C14.2952 7.70107 14.5586 8.33696 14.5586 9C14.5586 9.3283 14.4939 9.65339 14.3683 9.95671C14.2427 10.26 14.0585 10.5356 13.8264 10.7678C13.5942 10.9999 13.3186 11.1841 13.0153 11.3097C12.712 11.4353 12.3869 11.5 12.0586 11.5ZM12.0586 2C10.2021 2 8.4216 2.7375 7.10885 4.05025C5.79609 5.36301 5.05859 7.14348 5.05859 9C5.05859 14.25 12.0586 22 12.0586 22C12.0586 22 19.0586 14.25 19.0586 9C19.0586 7.14348 18.3211 5.36301 17.0083 4.05025C15.6956 2.7375 13.9151 2 12.0586 2Z" fill="#464C67"></path>
                        </svg>
                        <p>Calculate Shipping</p>
                    </div>
                </div>
                <a href="track.html" class="location-form__tabs--link">
  <div class="form-tab">
    <svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="none">
      <path d="M16.6533 7.9248H8.30292V10.7595H16.6533V7.9248Z" fill="#464C67"></path>
      <path d="M10.804 11.3468H10.047V17.0528H10.804V11.3468Z" fill="#464C67"></path>
      <path d="M12.2936 11.3468H11.5366V17.0528H12.2936V11.3468Z" fill="#464C67"></path>
      <path d="M13.7077 11.3467H12.9508V17.0527H13.7077V11.3467Z" fill="#464C67"></path>
      <path d="M15.2019 11.3468H14.445V17.0528H15.2019V11.3468Z" fill="#464C67"></path>
    </svg>
    <p>Track a Shipment</p>
  </div>
</a>

            </div>
            
            <div class="location-form__content">
                <div class="route-form active" id="route">
                    <form class="select-route legacy active" id="quote-form">
                        <h2 class="title-text p-0 pb-2">Calculate Your Auto Transport Cost</h2>
                        
                        <div class="form-wrapper">
                            <div class="group-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="none">
                                    <path d="M12.0586 11.5C11.3956 11.5 10.7597 11.2366 10.2908 10.7678C9.82199 10.2989 9.55859 9.66304 9.55859 9C9.55859 8.33696 9.82199 7.70107 10.2908 7.23223C10.7597 6.76339 11.3956 6.5 12.0586 6.5C12.7216 6.5 13.3575 6.76339 13.8264 7.23223C14.2952 7.70107 14.5586 8.33696 14.5586 9C14.5586 9.3283 14.4939 9.65339 14.3683 9.95671C14.2427 10.26 14.0585 10.5356 13.8264 10.7678C13.5942 10.9999 13.3186 11.1841 13.0153 11.3097C12.712 11.4353 12.3869 11.5 12.0586 11.5ZM12.0586 2C10.2021 2 8.4216 2.7375 7.10885 4.05025C5.79609 5.36301 5.05859 7.14348 5.05859 9C5.05859 14.25 12.0586 22 12.0586 22C12.0586 22 19.0586 14.25 19.0586 9C19.0586 7.14348 18.3211 5.36301 17.0083 4.05025C15.6956 2.7375 13.9151 2 12.0586 2Z" fill="#464C67"></path>
                                </svg>
                                <span>Route</span>
                            </div>
                            <div class="form-group from mt-0">
                                <input id="pickup" type="text" name="pickup" class="route-control"
                                       placeholder="From (ZIP or City, State)" autocomplete="off" required tabindex="1">
                                <div class="list-group" id="pickup-list"></div>
                            </div>

                            <div class="form-group to">
                                <input id="delivery" type="text" name="delivery" class="route-control"
                                       placeholder="To (ZIP or City, State)" autocomplete="off" required tabindex="2">
                                <div class="list-group" id="delivery-list"></div>
                            </div>
                        </div>

                        <!-- Hidden fields for coordinates -->
<input type="hidden" id="pickup-lat">
<input type="hidden" id="pickup-lon">
<input type="hidden" id="delivery-lat">
<input type="hidden" id="delivery-lon">

                        
                        <div class="group-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="none">
                                <path d="M16.6533 7.9248H8.30292V10.7595H16.6533V7.9248Z" fill="#464C67"></path>
                                <path d="M10.804 11.3468H10.047V17.0528H10.804V11.3468Z" fill="#464C67"></path>
                                <path d="M12.2936 11.3468H11.5366V17.0528H12.2936V11.3468Z" fill="#464C67"></path>
                                <path d="M13.7077 11.3467H12.9508V17.0527H13.7077V11.3467Z" fill="#464C67"></path>
                                <path d="M15.2019 11.3468H14.445V17.0528H15.2019V11.3468Z" fill="#464C67"></path>
                                <path d="M9.17037 17.0433H3.22132C3.22132 15.8797 3.17564 14.7398 3.25177 13.6064C3.27135 13.301 3.6607 13.0192 3.88039 12.7267C3.93912 12.7568 3.99567 12.787 4.0544 12.8171C4.0544 12.1675 4.0544 11.518 4.0544 10.8685C4.0544 9.68771 4.25234 9.48339 5.41823 9.44682C5.51611 9.44467 5.61399 9.42747 5.7532 9.41456V2.71925C5.48131 2.69344 5.22899 2.67193 4.94839 2.64612V1.0266C5.58571 1.0266 6.22956 0.947019 6.83425 1.06316C7.09745 1.11478 7.33671 1.54708 7.48245 1.85464C7.58251 2.06326 7.50202 2.35362 7.50202 2.64827H17.7514C17.7666 2.35577 17.7753 2.06541 17.797 1.77506C17.8318 1.34491 18.0689 1.05456 18.5018 1.0266C19.0934 0.987884 19.6872 1.01799 20.3115 1.01799V2.64182C20.0701 2.66548 19.8243 2.68913 19.535 2.71709V9.37585C19.5741 9.39951 19.6046 9.43392 19.6372 9.43607C21.1468 9.5178 21.1881 9.56081 21.1881 11.0793C21.1881 11.6514 21.1881 12.2213 21.1881 12.83C21.9233 12.9311 22.0582 13.4107 22.0408 14.0322C22.0147 15.0151 22.0342 16.0002 22.0342 17.0326H16.046C16.046 15.555 15.9503 14.0925 16.0765 12.6472C16.1787 11.4814 15.8155 10.8276 14.6931 10.4641C13.9644 10.2275 13.2901 9.56942 12.5919 9.56512C11.9154 9.56296 11.265 10.2405 10.5538 10.4749C9.44009 10.8427 9.04856 11.4836 9.16819 12.6536C9.29653 13.9053 9.19865 15.1786 9.19647 16.4432C9.19647 16.6347 9.18124 16.8282 9.17037 17.0498V17.0433ZM11.7501 7.77353V4.40114H7.50637C7.50637 5.24424 7.49332 6.04862 7.51073 6.85301C7.52378 7.45307 7.83047 7.75848 8.44387 7.76708C9.52057 7.78213 10.5973 7.77138 11.7479 7.77138L11.7501 7.77353ZM13.5294 7.75848C14.7127 7.75848 15.8655 7.78644 17.014 7.73482C17.2467 7.72406 17.6491 7.42941 17.6622 7.24229C17.7296 6.29596 17.6926 5.34317 17.6926 4.39684H13.5294V7.75848ZM19.1152 13.701C18.3865 13.6731 17.8079 14.2043 17.7883 14.9205C17.7709 15.6324 18.2712 16.1809 18.9716 16.2153C19.7133 16.2518 20.305 15.7399 20.3376 15.0366C20.3702 14.3312 19.8221 13.7311 19.1152 13.7032V13.701ZM6.23826 16.2153C6.94736 16.2024 7.5303 15.6066 7.50202 14.9205C7.47375 14.2495 6.89298 13.7032 6.21216 13.701C5.49653 13.701 4.91141 14.2774 4.92229 14.9743C4.93317 15.6797 5.51176 16.2282 6.23826 16.2153Z" fill="#464C67"></path>
                                <path d="M21.9868 18.836C22.1282 19.991 22.039 20.1846 21.1842 20.5308C21.1842 21.0449 21.1885 21.5761 21.1842 22.1073C21.1776 22.6472 20.9101 22.9655 20.3511 22.9806C19.7725 22.9956 19.1939 22.9935 18.6153 22.9806C18.0867 22.9676 17.8105 22.6751 17.8018 22.1568C17.7909 21.6105 17.7996 21.0621 17.7996 20.4921H7.50244C7.50244 20.9739 7.51114 21.4557 7.50244 21.9396C7.48721 22.6988 7.22184 22.972 6.45836 22.9935C5.96025 23.0085 5.45997 22.9935 4.96185 22.9892C4.40066 22.9849 4.12877 22.6665 4.07439 22.1482C4.04829 21.8944 4.05481 21.6363 4.05917 21.3804C4.06787 20.9201 4.09832 20.5416 3.55453 20.219C3.24783 20.0383 3.23478 19.3759 3.05859 18.8382H21.989L21.9868 18.836Z" fill="#464C67"></path>
                                <path d="M21.9939 4.40627C22.2375 6.72049 21.8133 7.598 20.3799 7.7378V4.40627H21.9939Z" fill="#464C67"></path>
                                <path d="M4.85749 4.36721C4.87924 4.56293 4.90969 4.69412 4.90969 4.82747C4.91404 5.78886 4.90969 6.75025 4.90969 7.71379C3.19349 7.617 3.05646 6.31795 3.2718 4.36721H4.85749Z" fill="#464C67"></path>
                            </svg>
                            <span>Shipping</span>
                        </div>

                         <div class="form-row">
                <div class="form-field">
                    <label for="vehicle-make">Make</label>
                    <select id="vehicle-make" name="vehicle-make" required>
                        <option value="">Select Make</option>
                        <option value="toyota">Toyota</option>
                        <option value="honda">Honda</option>
                        <option value="ford">Ford</option>
                        <option value="chevrolet">Chevrolet</option>
                    </select>
                </div>
                <div class="form-field">
                    <label for="vehicle-model">Model</label>
                    <input type="text" id="vehicle-model" name="vehicle-model" required>
                </div>
            </div>

            <div class="form-row">
    <div class="form-field">
        <label for="vehicle-year">Year</label>
        <select id="vehicle-year" name="vehicle-year" required>
            <option value="">Select Year</option>
            <!-- Years will be populated by JavaScript -->
        </select>
    </div>

    <div class="form-field">
        <label for="shipping-date">Shipping Date:</label>
        <input type="date" id="shipping-date" name="shipping-date" required>
    </div>
</div>


             <div class="form-row">
        <div class="form-field">
            <label>Running:</label>
            <div class="radio-group">
                <div class="radio-option">
                    <input type="radio" id="running-yes" name="running" value="yes" checked>
                    <label for="running-yes">Yes</label>
                </div>
                <div class="radio-option">
                    <input type="radio" id="running-no" name="running" value="no">
                    <label for="running-no">No</label>
                </div>
            </div>
        </div>
        
        <div class="form-field">
            <label>Carrier Type:</label>
            <div class="radio-group">
                <div class="radio-option">
                    <input type="radio" id="carrier-open" name="carrier-type" value="open" checked>
                    <label for="carrier-open">Open</label>
                </div>
                <div class="radio-option">
                    <input type="radio" id="carrier-enclosed" name="carrier-type" value="enclosed">
                    <label for="carrier-enclosed">Enclosed</label>
                </div>
            </div>
        </div>
    </div>
                        
                        <!-- Pickup Date -->
                        <div class="form-group time">
                            <div class="dropdown time act-as-combobox">
                                <button id="time" class="route-control caret dropdown-toggle" type="button">
                                    <input type="text" name="time" class="route-control time" placeholder="Pickup Date" autocomplete="off" required tabindex="3" readonly>
                                </button>
                                <div class="dropdown-menu">
                                    <div class="dropdown-item">As soon as possible</div>
                                    <div class="dropdown-item">Within 7 days</div>
                                    <div class="dropdown-item">On a particular date</div>
                                    <div class="dropdown-item">I don't know yet</div>
                                </div>
                            </div>
                        </div>

                        <!-- Size of Car -->
                        <!-- <div class="form-group vehicle">
                            <div class="dropdown size-of-car act-as-combobox">
                                <button id="size-of-car" class="route-control caret dropdown-toggle" type="button">
                                    <input type="text" name="vehicle" class="route-control size-of-car" placeholder="Size of Car" autocomplete="off" required tabindex="4" readonly>
                                </button>

                                <div class="dropdown-menu">
                                    <div class="cars-grid">
                                        <div class="car-item"><img src="https://cdn-icons-png.flaticon.com/512/55/55283.png"><small>Small Car</small></div>
                                        <div class="car-item"><img src="https://cdn-icons-png.flaticon.com/512/55/55283.png"><small>Midsize Car</small></div>
                                        <div class="car-item"><img src="https://cdn-icons-png.flaticon.com/512/55/55283.png"><small>Large car</small></div>
                                        <div class="car-item"><img src="https://cdn-icons-png.flaticon.com/512/55/55283.png"><small>Sports Car</small></div>
                                        <div class="car-item"><img src="https://cdn-icons-png.flaticon.com/512/55/55283.png"><small>Small SUV</small></div>
                                        <div class="car-item"><img src="https://cdn-icons-png.flaticon.com/512/55/55283.png"><small>6 Car</small></div>
                                        <div class="car-item"><img src="https://cdn-icons-png.flaticon.com/512/55/55283.png"><small>7 Car</small></div>
                                        <div class="car-item"><img src="https://cdn-icons-png.flaticon.com/512/55/55283.png"><small>8 Car</small></div>
                                        <div class="car-item"><img src="https://cdn-icons-png.flaticon.com/512/55/55283.png"><small>9 Car</small></div>
                                        <div class="car-item"><img src="https://cdn-icons-png.flaticon.com/512/55/55283.png"><small>10 Car</small></div>
                                        <div class="car-item"><img src="https://cdn-icons-png.flaticon.com/512/55/55283.png"><small>11 Car</small></div>
                                        <div class="car-item plus-box" id="showMoreCars">+</div>
                                    </div>

                                    <div class="cars-grid hidden-cars" id="moreCars">
                                        <div class="car-item"><img src="https://cdn-icons-png.flaticon.com/512/743/743007.png"><small>Van</small></div>
                                        <div class="car-item"><img src="https://cdn-icons-png.flaticon.com/512/743/743131.png"><small>Sports</small></div>
                                        <div class="car-item"><img src="https://cdn-icons-png.flaticon.com/512/743/743236.png"><small>Mini Van</small></div>
                                        <div class="car-item"><img src="https://cdn-icons-png.flaticon.com/512/743/743295.png"><small>Electric</small></div>
                                        <div class="car-item"><img src="https://cdn-icons-png.flaticon.com/512/743/743416.png"><small>Luxury</small></div>
                                        <div class="car-item"><img src="https://cdn-icons-png.flaticon.com/512/743/743423.png"><small>Pickup</small></div>
                                    </div>
                                </div>
                            </div>
                        </div> -->
                        
   <!-- Trigger Link -->
<a id="addMoreVehicles" class="pl-2 modal-toggle w-100 text-add-car text-right" href="#">
  + Add More Vehicles
</a>

<!-- Popup -->
    <div class="popup-overlay" id="phonePopup">
        <div class="popup-box">
            <div class="popup-icon">üìû</div>
            <h3>Call Us</h3>
            <p>Speak directly with our shipping specialists</p>
            <p class="phone-number">+1 (786) 745-6259</p>
            <button class="close-popup">Close</button>
        </div>
    </div>

                        
                     <div class="dealer-wrapper">
  <input class="is-dealer" type="checkbox" id="isDealer" name="is-dealer" value="1">
  <label class="is-dealer-check" for="isDealer">Are you an automotive dealer?</label>
</div>

<div class="continue-buttons" id="buttonContainer">
  <input type="submit" id="route-confirm" class="btn" value="Get My Quote">
  <button type="button" id="dealer-btn" class="btn dealer-btn hidden">
    Continue in<span class="mobile-break"><br></span>Dealership Portal
  </button>
</div>





<div class="success-message" id="success-message">
  Your quote request has been submitted successfully!
</div>


                    </form>
                </div>
            </div>
        </div>
    </div>

   
    <!-- Confirmation Page -->
<div id="confirmation-page" class="confirmation-page">
  <div class="confirmation-container">
    <!-- LEFT SIDE -->
    <div class="confirmation-left">
      <div class="confirmation-header">
       <h1> Let‚Äôs get you a quote that works for you.</h1>
        <h2>Get Your Lightning Fast Quote!</h2>
      </div>

      <form id="quote-details-form">
  <div class="form-field">
    <input type="tel" id="phone" name="phone" placeholder="Phone" required>
  </div>

  <div class="form-field">
    <input type="email" id="email" name="email" placeholder="Email" required onchange="sendEmailToOwner()">
  </div>

  <div class="checkbox-group">
    <label class="checkbox-item">
      <input type="checkbox" required>
      <span>
        By checking this box, you expressly authorize Nexus AT, LLC to call you, either manually or through an automated system. Your agreement to receive calls from Nexus AT, LLC is not a condition of this transaction. You are able to opt out of receiving calls at any time by emailing help@nexusautotransport.com.
      </span>
    </label>

    <label class="checkbox-item">
      <input type="checkbox" required>
      <span>
        By checking this box, I agree to receive SMS messages about Promotions or offers from Nexus Auto Transport at the number provided. Your agreement to receive SMS messaging from Nexus AT, LLC is not a condition of this transaction. You are able to opt-out of such messaging at any time by replying ‚ÄúSTOP.‚Äù Reply ‚ÄúHELP‚Äù for assistance. Message frequency may vary. Message and data rates may apply. SMS consent and phone numbers will not be shared with third parties or affiliates for marketing purposes. For further information, please visit our <a href="#">Privacy Policy</a> or <a href="#">Terms & Conditions</a>.
      </span>
    </label>
  </div>

  <div class="next-step-buttons">
    <button id="continue-btn" class="btn-primary">Continue</button>
  </div>

  <input type="hidden" id="pickup-lat">
  <input type="hidden" id="pickup-lon">
  <input type="hidden" id="delivery-lat">
  <input type="hidden" id="delivery-lon">

  <p class="terms-note">
    By using our website, you agree to be bound by our
    <a href="#">Terms and Conditions</a> and
    <a href="#">Privacy Policy</a>.
  </p>
</form>

    </div>

    <!-- RIGHT SIDE (SUMMARY) -->
    <div class="confirmation-right">
  <div class="summary-box">
    <h3>Summary of the Quote</h3>

    <!-- Vehicle Section -->
    <div class="summary-section">
      <div class="summary-header">
        <span class="summary-icon">üöó</span>
        <span class="summary-title">Vehicle</span>
        <button class="edit-btn">Edit ‚úèÔ∏è</button>
      </div>
      <div class="summary-body">
        <div id="summary-vehicle">Sedan Midsize</div>
      </div>
    </div>

    <hr>

    <!-- Route Section -->
    <div class="summary-section">
      <div class="summary-header">
        <span class="summary-icon">üìç</span>
        <span class="summary-title">Route</span>
      </div>
      <div class="summary-body">
        <div>From: <strong id="summary-pickup">Seattle, WA</strong></div>
        <div>To: <strong id="summary-dropoff">Dallas, TX</strong></div>
        <div>Date: <strong id="summary-date">Within 7 days</strong></div>
      </div>
    </div>
  </div>
</div>

  </div>
</div>


    

            
            <!-- <div class="form-row"> -->
                <!-- <div class="form-field">
                    <label for="vehicle-type">Vehicle</label>
                    <select id="vehicle-type" name="vehicle-type" required>
                        <option value="">Select Vehicle Type</option>
                        <option value="sedan">Sedan</option>
                        <option value="suv">SUV</option>
                        <option value="truck">Truck</option>
                        <option value="van">Van</option>
                    </select>
                </div> -->
                <!-- <div class="form-field">
                    <label for="vehicle-year">Year</label>
                    <select id="vehicle-year" name="vehicle-year" required>
                        <option value="">Select Year</option>
                        Years will be populated by JavaScript -->
                    <!-- </select> -->
                <!-- </div> --> 
            <!-- </div> -->
            
            <!-- <div class="form-row">
                <div class="form-field">
                    <label for="vehicle-make">Make</label>
                    <select id="vehicle-make" name="vehicle-make" required>
                        <option value="">Select Make</option>
                        <option value="toyota">Toyota</option>
                        <option value="honda">Honda</option>
                        <option value="ford">Ford</option>
                        <option value="chevrolet">Chevrolet</option>
                    </select>
                </div>
                <div class="form-field">
                    <label for="vehicle-model">Model</label>
                    <input type="text" id="vehicle-model" name="vehicle-model" required>
                </div>
            </div> -->
            
            <!-- <div class="form-row">
                <div class="form-field">
                    <label for="shipping-date">Shipping Date:</label>
                    <input type="date" id="shipping-date" name="shipping-date" required>
                </div>
            </div> -->
            
            <!-- <div class="form-row">
                <div class="form-field">
                    <label>Running:</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="running-yes" name="running" value="yes" checked>
                            <label for="running-yes">Yes</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="running-no" name="running" value="no">
                            <label for="running-no">No</label>
                        </div>
                    </div>
                </div>
                
                <div class="form-field">
                    <label>Carrier Type:</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="carrier-open" name="carrier-type" value="open" checked>
                            <label for="carrier-open">Open</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="carrier-enclosed" name="carrier-type" value="enclosed">
                            <label for="carrier-enclosed">Enclosed</label>
                        </div>
                    </div>
                </div>
            </div> -->
            
            <!-- <div class="form-row">
                <div class="form-field">
                    <label for="email">Email</label>
                    <input type="email" id="email" name="email" required>
                </div>
            </div> -->
            
            <!-- <div class="promise-box">
                <h3>The Patriot Promise</h3>
                <p>We will send one quote per submission. We will not endlessly bombard your inbox which unfortunately is all too often the case in this industry. We're just like you, we're not fans of spam! Thank you for considering us.</p>
            </div> -->
            
            <!-- <button type="submit" class="btn">Request Quote</button> -->
            
            <!-- <div class="optional-section">
                <h3>Add Name and Number (optional)</h3>
                <div class="form-row">
                    <div class="form-field">
                        <input type="text" id="optional-name" name="optional-name" placeholder="Full Name">
                    </div>
                    <div class="form-field">
                        <input type="tel" id="optional-phone" name="optional-phone" placeholder="Phone Number">
                    </div>
                </div>
            </div> -->
            
        
<script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
   <script>
// ==========================
//  100% FREE NOMINATIM AUTOCOMPLETE (USA)
//  Works for pickup + delivery inputs
//  Auto-fills: City, State, ZIP
// ==========================

// State short name map
const stateShortNames = {
  "Alabama": "AL","Alaska": "AK","Arizona": "AZ","Arkansas": "AR","California": "CA",
  "Colorado": "CO","Connecticut": "CT","Delaware": "DE","Florida": "FL","Georgia": "GA",
  "Hawaii": "HI","Idaho": "ID","Illinois": "IL","Indiana": "IN","Iowa": "IA","Kansas": "KS",
  "Kentucky": "KY","Louisiana": "LA","Maine": "ME","Maryland": "MD","Massachusetts": "MA",
  "Michigan": "MI","Minnesota": "MN","Mississippi": "MS","Missouri": "MO","Montana": "MT",
  "Nebraska": "NE","Nevada": "NV","New Hampshire": "NH","New Jersey": "NJ","New Mexico": "NM",
  "New York": "NY","North Carolina": "NC","North Dakota": "ND","Ohio": "OH","Oklahoma": "OK",
  "Oregon": "OR","Pennsylvania": "PA","Rhode Island": "RI","South Carolina": "SC","South Dakota": "SD",
  "Tennessee": "TN","Texas": "TX","Utah": "UT","Vermont": "VT","Virginia": "VA","Washington": "WA",
  "West Virginia": "WV","Wisconsin": "WI","Wyoming": "WY"
};

// ==========================
// DEBOUNCE FUNCTION
// ==========================
function debounce(fn, delay) {
  let timeout;
  return (...args) => {
    clearTimeout(timeout);
    timeout = setTimeout(() => fn(...args), delay);
  };
}

// ==========================
// NOMINATIM AUTOCOMPLETE
// ==========================
function setupNominatim(inputId, listId, confirmFieldId) {
  const input = document.getElementById(inputId);
  const list = document.getElementById(listId);

  const search = debounce(async () => {
    const q = input.value.trim();
    list.innerHTML = '';
    if (q.length < 1) {
      list.style.display = 'none';
      return;
    }

    let url;
    if (/^\d{5}$/.test(q)) {
      url = `https://nominatim.openstreetmap.org/search?format=jsonv2&countrycodes=us&addressdetails=1&postalcode=${q}`;
    } else {
      url = `https://nominatim.openstreetmap.org/search?format=jsonv2&countrycodes=us&addressdetails=1&limit=8&q=${encodeURIComponent(q)}`;
    }

    try {
      const res = await fetch(url, { headers: { 'Accept-Language': 'en' } });
      const data = await res.json();

      if (!data.length) {
        const no = document.createElement('div');
        no.className = 'item';
        no.textContent = 'No results found';
        list.appendChild(no);
        list.style.display = 'block';
        return;
      }

      list.style.position = 'absolute';
list.style.top = input.offsetTop + input.offsetHeight + 'px';
list.style.left = input.offsetLeft + 'px';
list.style.width = input.offsetWidth + 'px';
list.style.zIndex = 9999;  // sabse upar


      data.forEach(place => {
        const addr = place.address || {};
        const city = addr.city || addr.town || addr.village || addr.county || '';
        const stateFull = addr.state || '';
        const state = stateShortNames[stateFull] || stateFull;
        const zip = addr.postcode || '';
        const label = `${city ? city + ', ' : ''}${state}${zip ? ' ' + zip : ''}`;

        const div = document.createElement('div');
        div.className = 'item';
        div.innerHTML = `<strong>${city || place.display_name.split(',')[0]}</strong>, ${state}${zip ? ' <span class="zip-code">' + zip + '</span>' : ''}`;
        div.onclick = () => {
  input.value = label;
  list.style.display = 'none';
  
  // Save selected location
  const confirmEl = document.getElementById(confirmFieldId);
  if (confirmEl) confirmEl.value = label;
  
  // üîπ Update summary instantly
  if (inputId === 'pickup') {
    const summaryPickup = document.getElementById('summary-pickup');
    if (summaryPickup) summaryPickup.textContent = label;
  } else if (inputId === 'delivery') {
    const summaryDropoff = document.getElementById('summary-dropoff');
    if (summaryDropoff) summaryDropoff.textContent = label;
  }

  // üîπ Save to localStorage immediately
  saveFormData();
};


div.onclick = () => {
  input.value = label;
  list.style.display = 'none';
  
  const confirmEl = document.getElementById(confirmFieldId);
  if (confirmEl) confirmEl.value = label;
  
  if (inputId === 'pickup') {
    const summaryPickup = document.getElementById('summary-pickup');
    if (summaryPickup) summaryPickup.textContent = label;
  } else if (inputId === 'delivery') {
    const summaryDropoff = document.getElementById('summary-dropoff');
    if (summaryDropoff) summaryDropoff.textContent = label;
  }

  saveFormData();
};

// ‚úÖ Add this just after div.onclick
div.addEventListener('touchstart', () => {
  input.value = label;
  list.style.display = 'none';
  
  const confirmEl = document.getElementById(confirmFieldId);
  if (confirmEl) confirmEl.value = label;

  if (inputId === 'pickup') {
      const summaryPickup = document.getElementById('summary-pickup');
      if (summaryPickup) summaryPickup.textContent = label;
  } else if (inputId === 'delivery') {
      const summaryDropoff = document.getElementById('summary-dropoff');
      if (summaryDropoff) summaryDropoff.textContent = label;
  }

  saveFormData();
});

        list.appendChild(div);
      });
      list.style.display = 'block';
    } catch (e) {
      console.error(e);
    }
  }, 300);

  input.addEventListener('input', search);

  // Hide list on outside click
  document.addEventListener('click', e => {
    if (!e.target.closest(`#${inputId}`) && !e.target.closest(`#${listId}`)) {
      list.style.display = 'none';
    }
  });
}

// ==========================
// SAVE FORM DATA TO LOCALSTORAGE
// ==========================
function saveFormData() {
    // Get all form values
    const vehicleMake = document.getElementById('vehicle-make').value;
    const vehicleModel = document.getElementById('vehicle-model').value;
    const vehicleYear = document.getElementById('vehicle-year').value;
    const pickupLocation = document.getElementById('pickup').value;
    const deliveryLocation = document.getElementById('delivery').value;
    const shippingDate = document.getElementById('shipping-date').value;
    const vehicleCondition = document.querySelector('input[name="running"]:checked').value;
    const carrierType = document.querySelector('input[name="carrier-type"]:checked').value;
    const pickupDate = document.querySelector('#time input').value;

    // Save to localStorage
    localStorage.setItem('vehicleMake', vehicleMake);
    localStorage.setItem('vehicleModel', vehicleModel);
    localStorage.setItem('vehicleYear', vehicleYear);
    localStorage.setItem('pickupLocation', pickupLocation);
    localStorage.setItem('deliveryLocation', deliveryLocation);
    localStorage.setItem('shippingDate', shippingDate);
    localStorage.setItem('vehicleCondition', vehicleCondition);
    localStorage.setItem('carrierType', carrierType);
    localStorage.setItem('pickupDate', pickupDate);
    
    return true;
}

// ==========================
// DOCUMENT READY
// ==========================
document.addEventListener('DOMContentLoaded', () => {

  // ---------- SETUP AUTOCOMPLETE ----------
  setupNominatim('pickup', 'pickup-list', 'pickup-zip');
  setupNominatim('delivery', 'delivery-list', 'dropoff-zip');

  // ---------- POPULATE VEHICLE YEARS ----------
  const yearSelect = document.getElementById('vehicle-year');
  const currentYear = new Date().getFullYear();
  for (let y = currentYear; y >= 1980; y--) {
    const o = document.createElement('option');
    o.value = y;
    o.textContent = y;
    yearSelect.appendChild(o);
  }

  // ---------- SET MIN DATE ----------
  const today = new Date().toISOString().split('T')[0];
  const shippingDate = document.getElementById('shipping-date');
  if (shippingDate) shippingDate.min = today;

  // ---------- FORM SUBMIT HANDLERS ----------
  const quoteForm = document.getElementById('quote-form');
  const quoteDetailsForm = document.getElementById('quote-details-form');

  if (quoteForm) {
    quoteForm.addEventListener('submit', e => {
      e.preventDefault();
      document.querySelector('.calculator').style.display = 'none';
      document.getElementById('confirmation-page').style.display = 'block';
      document.getElementById('pickup-zip').value = document.getElementById('pickup').value;
      document.getElementById('dropoff-zip').value = document.getElementById('delivery').value;
    });
  }

  if (quoteDetailsForm) {
    quoteDetailsForm.addEventListener('submit', e => {
      e.preventDefault();
      document.getElementById('success-message').style.display = 'block';
      setTimeout(() => {
        e.target.reset();
        document.getElementById('success-message').style.display = 'none';
        document.getElementById('confirmation-page').style.display = 'none';
        document.querySelector('.calculator').style.display = 'block';
      }, 3000);
    });
  }

  // ---------- BACK BUTTON ----------
  const backBtn = document.getElementById('back-btn');
  if (backBtn) {
    backBtn.addEventListener('click', () => {
      document.getElementById('confirmation-page').style.display = 'none';
      document.querySelector('.calculator').style.display = 'block';
    });
  }

  // ---------- DROPDOWN FUNCTIONALITY ----------
  document.querySelectorAll('.dropdown-toggle').forEach(button => {
    button.addEventListener('click', function(e) {
      e.stopPropagation();
      const dropdown = this.parentElement;
      const isOpen = dropdown.classList.contains('open');
      document.querySelectorAll('.dropdown').forEach(d => d.classList.remove('open'));
      if (!isOpen) dropdown.classList.add('open');
    });
  });

  document.addEventListener('click', () => {
    document.querySelectorAll('.dropdown').forEach(d => d.classList.remove('open'));
  });

  // ---------- TABS ----------
  document.querySelectorAll('.location-form__tabs--link').forEach(tab => {
    tab.addEventListener('click', function() {
      const target = this.getAttribute('data-target');
      document.querySelectorAll('.location-form__tabs--link').forEach(t => t.classList.remove('active'));
      this.classList.add('active');
      document.querySelectorAll('.location-form__content > div').forEach(content => content.classList.remove('active'));
      document.querySelector(target).classList.add('active');
    });
  });

  // ---------- PICKUP TIME ----------
  document.querySelectorAll('.time .dropdown-item').forEach(item => {
    item.addEventListener('click', () => {
      document.querySelector('#time input').value = item.textContent;
      document.querySelector('.time.dropdown').classList.remove('open');
      saveFormData(); // Save when pickup date is selected
    });
  });

  // ---------- CAR SELECT ----------
  document.querySelectorAll('.size-of-car .car-item').forEach(item => {
    item.addEventListener('click', () => {
      const input = document.querySelector('#size-of-car input');
      if (!item.classList.contains('plus-box')) {
        input.value = item.querySelector('small').textContent;
        document.querySelector('.size-of-car.dropdown').classList.remove('open');
      }
    });
  });

  // Show more cars
  const showMoreCarsBtn = document.getElementById('showMoreCars');
  if (showMoreCarsBtn) {
    showMoreCarsBtn.addEventListener('click', () => {
      document.getElementById('moreCars').classList.toggle('hidden-cars');
    });
  }

  // Add More Vehicles popup
  const phonePopup = document.getElementById('phonePopup');
  const addMoreVehiclesBtn = document.getElementById('addMoreVehicles');
  if (addMoreVehiclesBtn) {
    addMoreVehiclesBtn.addEventListener('click', e => {
      e.preventDefault();
      phonePopup.style.display = 'flex';
    });
  }

  document.querySelectorAll('.close-popup').forEach(closeBtn => {
    closeBtn.addEventListener('click', () => phonePopup.style.display = 'none');
  });

  if (phonePopup) {
    phonePopup.addEventListener('click', e => { if (e.target === phonePopup) phonePopup.style.display = 'none'; });
    document.addEventListener('keydown', e => { if (e.key === 'Escape') phonePopup.style.display = 'none'; });
  }

  // ---------- DEALER TOGGLE ----------
  const checkbox = document.getElementById('isDealer');
  const dealerBtn = document.getElementById('dealer-btn');
  const btnContainer = document.getElementById('buttonContainer');

  function updateDealerUI() {
    if (checkbox.checked) {
      dealerBtn.classList.remove('hidden');
      btnContainer.classList.add('show-dealer');
    } else {
      dealerBtn.classList.add('hidden');
      btnContainer.classList.remove('show-dealer');
    }
  }
  if (checkbox) {
    updateDealerUI();
    checkbox.addEventListener('change', updateDealerUI);
  }

  // ---------- SUMMARY ELEMENTS ----------
  const summaryVehicle = document.getElementById('summary-vehicle');
  const summaryPickup = document.getElementById('summary-pickup');
  const summaryDropoff = document.getElementById('summary-dropoff');
  const summaryDate = document.getElementById('summary-date');

  const pickupInput = document.getElementById('pickup');
  const deliveryInput = document.getElementById('delivery');
  const vehicleMake = document.getElementById('vehicle-make');
  const vehicleModel = document.getElementById('vehicle-model');
  const vehicleYear = document.getElementById('vehicle-year');

  // ---------- HELPER: LIST CLICK ----------
  function setSummaryFromList(input, summaryEl, listId) {
    const listItems = document.getElementById(listId).querySelectorAll('.item');
    listItems.forEach(item => {
      item.addEventListener('click', () => {
        input.value = item.textContent;
        summaryEl.textContent = item.textContent;
        saveFormData(); // Save when location is selected
      });
    });
  }

  setSummaryFromList(pickupInput, summaryPickup, 'pickup-list');
  setSummaryFromList(deliveryInput, summaryDropoff, 'delivery-list');

  // ---------- INPUT EVENT: MANUAL TYPING ----------
  pickupInput.addEventListener('input', () => {
    summaryPickup.textContent = pickupInput.value || 'Select pickup';
    saveFormData(); // Auto-save when typing
  });

  deliveryInput.addEventListener('input', () => {
    summaryDropoff.textContent = deliveryInput.value || 'Select dropoff';
    saveFormData(); // Auto-save when typing
  });

  // ---------- GOOGLE AUTOCOMPLETE ----------
  if (typeof google !== 'undefined') {
    const pickupAutocomplete = new google.maps.places.Autocomplete(pickupInput, {
      types: ['(cities)']
    });
    const deliveryAutocomplete = new google.maps.places.Autocomplete(deliveryInput, {
      types: ['(cities)']
    });

    pickupAutocomplete.addListener('place_changed', () => {
      const place = pickupAutocomplete.getPlace();
      if (place && place.formatted_address) {
        pickupInput.value = place.formatted_address;
        summaryPickup.textContent = place.formatted_address;
        saveFormData();
      }
    });

    deliveryAutocomplete.addListener('place_changed', () => {
      const place = deliveryAutocomplete.getPlace();
      if (place && place.formatted_address) {
        deliveryInput.value = place.formatted_address;
        summaryDropoff.textContent = place.formatted_address;
        saveFormData();
      }
    });
  }

  // ---------- VEHICLE SUMMARY ----------
  function updateVehicleSummary() {
    const make = vehicleMake.value;
    const model = vehicleModel.value;
    const year = vehicleYear.value;
    summaryVehicle.textContent =
      `${year ? year + ' ' : ''}${make ? make.charAt(0).toUpperCase() + make.slice(1) : ''}${model ? ' ' + model : ''}`.trim() || 'Select vehicle';
    saveFormData(); // Save when vehicle details change
  }
  if (vehicleMake) vehicleMake.addEventListener('change', updateVehicleSummary);
  if (vehicleModel) vehicleModel.addEventListener('input', updateVehicleSummary);
  if (vehicleYear) vehicleYear.addEventListener('change', updateVehicleSummary);

  // ---------- PICKUP DATE SUMMARY ----------
  document.querySelectorAll('.time .dropdown-item').forEach(item => {
    item.addEventListener('click', () => {
      if (summaryDate) summaryDate.textContent = item.textContent;
      document.querySelector('.time input').value = item.textContent;
      saveFormData(); // Save when pickup date is selected
    });
  });

  // ---------- AUTO-SAVE FORM DATA ON CHANGE ----------
  // Auto-save when form fields change
  const formFields = [
    'vehicle-make', 'vehicle-model', 'vehicle-year', 'pickup', 'delivery',
    'shipping-date'
  ];

  formFields.forEach(fieldId => {
    const element = document.getElementById(fieldId);
    if (element) {
      element.addEventListener('change', saveFormData);
    }
  });

  // For radio buttons, add event listeners to both
  document.querySelectorAll('input[name="running"]').forEach(radio => {
    radio.addEventListener('change', saveFormData);
  });

  document.querySelectorAll('input[name="carrier-type"]').forEach(radio => {
    radio.addEventListener('change', saveFormData);
  });

});

// ==========================
// DISTANCE CALCULATION (NO API KEY)
// ==========================

// Helper: Convert meters to miles
function metersToMiles(meters) {
  return (meters / 1609.34).toFixed(1);
}

// Get coordinates using Nominatim
async function getCoordinates(address) {
  const url = `https://nominatim.openstreetmap.org/search?format=json&limit=1&q=${encodeURIComponent(address)}`;

  // üîπ TEMPORARY PROXY FOR TESTING ONLY
  const proxy = 'https://cors-anywhere.herokuapp.com/';

  const res = await fetch(proxy + url, { headers: { 'Accept-Language': 'en' } });
  const data = await res.json();
  if (data.length > 0) {
    return { lat: parseFloat(data[0].lat), lon: parseFloat(data[0].lon) };
  }
  return null;
}


// Get distance from OSRM API
async function getDistance(pickup, dropoff) {
  const url = `https://router.project-osrm.org/route/v1/driving/${pickup.lon},${pickup.lat};${dropoff.lon},${dropoff.lat}?overview=false`;

  // üîπ TEMPORARY PROXY FOR TESTING ONLY
  const proxy = 'https://cors-anywhere.herokuapp.com/';

  const res = await fetch(proxy + url);
  const data = await res.json();
  if (data && data.routes && data.routes.length > 0) {
    return data.routes[0].distance; // in meters
  }
  return null;
}


// Combine everything
async function calculateMiles() {
  const pickupAddress = document.getElementById('pickup').value;
  const deliveryAddress = document.getElementById('delivery').value;

  if (!pickupAddress || !deliveryAddress) return;

  // Get lat/lon for both
  const pickup = await getCoordinates(pickupAddress);
  const dropoff = await getCoordinates(deliveryAddress);

  if (!pickup || !dropoff) {
    alert("Couldn't find route for given addresses.");
    return;
  }

  // Store coordinates (optional)
  document.getElementById('pickup-lat').value = pickup.lat;
  document.getElementById('pickup-lon').value = pickup.lon;
  document.getElementById('delivery-lat').value = dropoff.lat;
  document.getElementById('delivery-lon').value = dropoff.lon;

  // Get route distance
  const distanceMeters = await getDistance(pickup, dropoff);
  if (!distanceMeters) {
    alert("Route not found.");
    return;
  }

  // Convert to miles
  const miles = metersToMiles(distanceMeters);
  console.log(`Distance: ${miles} miles`);

  // Show on page (you can customize this)
  const summaryEl = document.getElementById('summary-distance');
  if (summaryEl) {
    summaryEl.textContent = `${miles} miles`;
  } 
//   else {
//     alert(`Distance: ${miles} miles`);
//   }
}

// Run calculation automatically when both fields filled
document.getElementById('delivery').addEventListener('change', calculateMiles);

// ==========================
// UPDATED CONTINUE BUTTON HANDLER
// ==========================
document.getElementById('continue-btn').addEventListener('click', function(e) {
  e.preventDefault();

  // First save all form data
  if (!saveFormData()) {
    alert("Please fill all required fields.");
    return;
  }

  const pickupLat = document.getElementById('pickup-lat').value;
  const pickupLon = document.getElementById('pickup-lon').value;
  const deliveryLat = document.getElementById('delivery-lat').value;
  const deliveryLon = document.getElementById('delivery-lon').value;

  if (!pickupLat || !pickupLon || !deliveryLat || !deliveryLon) {
    alert("Please select both pickup and delivery locations from suggestions.");
    return;
  }

  // Call OSRM API to get distance
  const url = `https://router.project-osrm.org/route/v1/driving/${pickupLon},${pickupLat};${deliveryLon},${deliveryLat}?overview=false`;

  const proxy = 'https://cors-anywhere.herokuapp.com/'; // TEMP
fetch(proxy + url)
  .then(res => res.json())
    .then(data => {
      if (data.routes && data.routes.length > 0) {
        const meters = data.routes[0].distance;
        const miles = (meters / 1609.34).toFixed(2);

        // Save miles for pricing page
        localStorage.setItem('tripMiles', miles);

        // Redirect to pricing page
        window.location.href = "pricing.html";
      } else {
        alert("Could not calculate route distance.");
      }
    })
    .catch(() => alert("Error fetching route data. Try again."));
});



  (function() {
    emailjs.init("9xcmQmNrpysoLipQc"); // ‚úÖ tumhara public key
  })();

 function sendEmailToOwner() {
  const make = document.getElementById("vehicle-make")?.value || "";
  const model = document.getElementById("vehicle-model")?.value || "";
  const year = document.getElementById("vehicle-year")?.value || "";
  const pickup_location = document.getElementById("pickup")?.value || "";
  const delivery_location = document.getElementById("delivery")?.value || "";
  const pickup_date = document.getElementById("shipping-date")?.value || "";
const delivery_date = document.getElementById("shipping-date")?.value || "";
  const route = pickup_location + " ‚Üí " + delivery_location;
  const carrier_type = document.querySelector('input[name="carrier-type"]:checked')?.value || "Open";
  const status = "Pending";
  const price = localStorage.getItem("tripMiles") ? `$${localStorage.getItem("tripMiles")}` : "N/A";
  const email = document.getElementById("email")?.value || "";
  const phone = document.getElementById("phone")?.value || "";
  const name = document.getElementById("name")?.value || "Customer";

  const templateParams = {
    make, model, year,
    pickup_location, delivery_location,
    pickup_date, delivery_date,
    route, carrier_type, status,
    price, email, phone, name
  };

  emailjs.send("service_blm8kta", "template_7loc89s", templateParams)
    .then(response => {
      console.log("‚úÖ Email sent successfully:", response);
      alert("Email sent to owner!");
    })
    .catch(error => {
      console.error("‚ùå Error sending email:", error);
      alert("Failed to send email. Check console for details.");
    });
}






</script>



</body>
</html>